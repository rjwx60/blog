(window.webpackJsonp=window.webpackJsonp||[]).push([[137],{641:function(_,e,t){"use strict";t.r(e);var a=t(4),v=Object(a.a)({},(function(){var _=this,e=_.$createElement,t=_._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h1",{attrs:{id:"三、浏览器存储"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、浏览器存储"}},[_._v("#")]),_._v(" 三、浏览器存储")]),_._v(" "),t("p",[_._v("浏览器的本地存储主要分为： "),t("strong",[_._v("Cookie")]),_._v("、"),t("strong",[_._v("WebStorage(可再分为 localStorage 和 sessionStorage)")]),_._v("、"),t("strong",[_._v("IndexedDB")]),_._v("；")]),_._v(" "),t("h2",{attrs:{id:"_3-1、cookie"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1、cookie"}},[_._v("#")]),_._v(" 3-1、Cookie")]),_._v(" "),t("p",[_._v("Cookie 设计之初并非用于本地存储，而是为了弥补 HTTP 在状态管理上的不足(无状态协议，服务端无法辨别每次请求的客户端的具体情况)；")]),_._v(" "),t("p",[_._v("Cookie 本质是浏览器中存储的一个很小的、内容以键值对形式存储的文本文件，每次向同一域名发送请求，均会自动携带相同 Cookie，服务器拿到 Cookie 后进行解析，即可获取客户端状态；即 Cookie 用于 "),t("u",[_._v("状态存储")]),_._v("，但缺点有如下：")]),_._v(" "),t("ul",[t("li",[_._v("容量缺陷：体积上限只有"),t("code",[_._v("4KB")]),_._v("，只能存储少量信息；")]),_._v(" "),t("li",[_._v("性能缺陷：Cookie 紧跟域名发送而不管是否真正需要，随着请求数增多性能浪费越严重——请求携带不必要数据；")]),_._v(" "),t("li",[_._v("安全缺陷：Cookie 纯文本形式，在飞行途中很容易被非法用户截获篡改，在有效期内发送给服务器更是危险操作；\n"),t("ul",[t("li",[_._v("此外，若 "),t("strong",[_._v("HttpOnly")]),_._v(" 字段为 false，Cookie 信息还可直接通过 JS 脚本来读取；")])])])]),_._v(" "),t("h2",{attrs:{id:"_3-2、localstorage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2、localstorage"}},[_._v("#")]),_._v(" 3-2、localStorage")]),_._v(" "),t("h3",{attrs:{id:"_3-2-1、与-cookie-的异同"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1、与-cookie-的异同"}},[_._v("#")]),_._v(" 3-2-1、与 Cookie 的异同")]),_._v(" "),t("p",[_._v("同一个域名下，会存储相同一段 "),t("strong",[_._v("localStorage / Cookie")]),_._v("，而不同在：")]),_._v(" "),t("ul",[t("li",[_._v("容量：针对每个域名，均有上限为 5M 的存储容量；")]),_._v(" "),t("li",[_._v("安全：只存在客户端，默认不参与与服务端通信；")]),_._v(" "),t("li",[_._v("接口：接口友好，通过 "),t("code",[_._v("localStorage")]),_._v(" 全局暴露，拥有诸多方法可供操作(Cookie 只能自定义)；")])]),_._v(" "),t("h3",{attrs:{id:"_3-2-2、操作方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2、操作方式"}},[_._v("#")]),_._v(" 3-2-2、操作方式")]),_._v(" "),t("p",[t("strong",[_._v("localStorage")]),_._v("  存储的都是字符串，若是存储对象需要调用 "),t("code",[_._v("JSON.stringify")]),_._v("方法，并且用 "),t("code",[_._v("JSON.parse")]),_._v("来解析成对象；")]),_._v(" "),t("h3",{attrs:{id:"_3-2-3、应用场景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-3、应用场景"}},[_._v("#")]),_._v(" 3-2-3、应用场景")]),_._v(" "),t("p",[_._v("适合存储一些内容稳定的资源，比如官网的"),t("code",[_._v("logo")]),_._v("，存储"),t("code",[_._v("Base64")]),_._v("格式的图片资源，因此利用"),t("code",[_._v("localStorage")]),_._v("；")]),_._v(" "),t("h2",{attrs:{id:"_3-3、sessionstorage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3、sessionstorage"}},[_._v("#")]),_._v(" 3-3、sessionStorage")]),_._v(" "),t("h3",{attrs:{id:"_3-3-1、与-sessionstorage-的异同"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-1、与-sessionstorage-的异同"}},[_._v("#")]),_._v(" 3-3-1、与 sessionStorage 的异同")]),_._v(" "),t("p",[_._v("最大区别在："),t("strong",[_._v("sessionStorage")]),_._v(" 只是会话级别的存储，并非持久化存储，一旦会话结束(当前 tab 页面关闭)就消失；")]),_._v(" "),t("ul",[t("li",[_._v("容量：容量上限也为 5M；")]),_._v(" "),t("li",[_._v("安全：只存在客户端，默认不参与与服务端的通信；")]),_._v(" "),t("li",[_._v("接口：接口友好，类似 "),t("strong",[_._v("localStorage")]),_._v("；")])]),_._v(" "),t("h3",{attrs:{id:"_3-3-2、应用场景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-2、应用场景"}},[_._v("#")]),_._v(" 3-3-2、应用场景")]),_._v(" "),t("ul",[t("li",[_._v("表单信息进行维护：将表单信息存储在里面，可保证页面即使刷新也不会让先前表单信息丢失；")]),_._v(" "),t("li",[_._v("存储本次浏览记录：因关闭页面后不需要这些记录；")])]),_._v(" "),t("h2",{attrs:{id:"_3-5、indexeddb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-5、indexeddb"}},[_._v("#")]),_._v(" 3-5、IndexedDB")]),_._v(" "),t("p",[_._v("其实运行在浏览器中的 "),t("u",[_._v("非关系型数据库")]),_._v("，理论上容量是无上限；"),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API/Using_IndexedDB",target:"_blank",rel:"noopener noreferrer"}},[_._v("使用文档"),t("OutboundLink")],1),_._v("，其拥有数据库本身的特性，比如：支持事务，存储二进制数据，还有其他特殊特性：")]),_._v(" "),t("ul",[t("li",[_._v("键值对存储：内部采用 "),t("u",[_._v("对象仓库")]),_._v(" 存放数据，在此仓库中数据采用 "),t("u",[_._v("键值对")]),_._v(" 形式存储；")]),_._v(" "),t("li",[_._v("异步操作：数据库的读写属于 I/O 操作，浏览器中对异步 I/O 提供了支持；")]),_._v(" "),t("li",[_._v("受同源策略限制，无法访问跨域的数据库；")])]),_._v(" "),t("h2",{attrs:{id:"_3-6、总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-6、总结"}},[_._v("#")]),_._v(" 3-6、总结")]),_._v(" "),t("ul",[t("li",[_._v("Cookie 并不适合存储，而且存在非常多的缺陷；")]),_._v(" "),t("li",[_._v("Web Storage 包括 localStorage 和 sessionStorage，默认不会参与和服务器的通信；")]),_._v(" "),t("li",[_._v("IndexedDB 为运行在浏览器上的非关系型数据库，为大型数据的存储提供了接口；")])])])}),[],!1,null,null,null);e.default=v.exports}}]);