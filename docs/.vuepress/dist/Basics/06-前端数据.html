<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>一、基本 | Leibnize 个人学习笔记</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="整理自网络">
    <link rel="preload" href="/docs/assets/css/0.styles.2f643d57.css" as="style"><link rel="preload" href="/docs/assets/js/app.cda475f7.js" as="script"><link rel="preload" href="/docs/assets/js/2.c902c426.js" as="script"><link rel="preload" href="/docs/assets/js/50.1a00f734.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.418fecbd.js"><link rel="prefetch" href="/docs/assets/js/11.e2c998bf.js"><link rel="prefetch" href="/docs/assets/js/12.b627468b.js"><link rel="prefetch" href="/docs/assets/js/13.682b9b92.js"><link rel="prefetch" href="/docs/assets/js/14.0880e743.js"><link rel="prefetch" href="/docs/assets/js/15.4a6c4027.js"><link rel="prefetch" href="/docs/assets/js/16.200e0299.js"><link rel="prefetch" href="/docs/assets/js/17.1c6394bc.js"><link rel="prefetch" href="/docs/assets/js/18.c0560a2b.js"><link rel="prefetch" href="/docs/assets/js/19.f63607cc.js"><link rel="prefetch" href="/docs/assets/js/20.d56d802e.js"><link rel="prefetch" href="/docs/assets/js/21.52c3ae8e.js"><link rel="prefetch" href="/docs/assets/js/22.b47add39.js"><link rel="prefetch" href="/docs/assets/js/23.a8a40e53.js"><link rel="prefetch" href="/docs/assets/js/24.a0e2af55.js"><link rel="prefetch" href="/docs/assets/js/25.1fb24116.js"><link rel="prefetch" href="/docs/assets/js/26.068130b1.js"><link rel="prefetch" href="/docs/assets/js/27.6cb72d75.js"><link rel="prefetch" href="/docs/assets/js/28.d99e5701.js"><link rel="prefetch" href="/docs/assets/js/29.4848d9ba.js"><link rel="prefetch" href="/docs/assets/js/3.be11a00a.js"><link rel="prefetch" href="/docs/assets/js/30.92ed4a03.js"><link rel="prefetch" href="/docs/assets/js/31.de402b39.js"><link rel="prefetch" href="/docs/assets/js/32.b5ca6564.js"><link rel="prefetch" href="/docs/assets/js/33.c3d91abd.js"><link rel="prefetch" href="/docs/assets/js/34.b868c98b.js"><link rel="prefetch" href="/docs/assets/js/35.4128bd9f.js"><link rel="prefetch" href="/docs/assets/js/36.8e4b22b8.js"><link rel="prefetch" href="/docs/assets/js/37.090897e6.js"><link rel="prefetch" href="/docs/assets/js/38.f8d5752b.js"><link rel="prefetch" href="/docs/assets/js/39.f949333a.js"><link rel="prefetch" href="/docs/assets/js/4.64176cb5.js"><link rel="prefetch" href="/docs/assets/js/40.39833f40.js"><link rel="prefetch" href="/docs/assets/js/41.a12c7b96.js"><link rel="prefetch" href="/docs/assets/js/42.a5e6d9e8.js"><link rel="prefetch" href="/docs/assets/js/43.28874788.js"><link rel="prefetch" href="/docs/assets/js/44.8d4042e3.js"><link rel="prefetch" href="/docs/assets/js/45.b148e845.js"><link rel="prefetch" href="/docs/assets/js/46.91062fd6.js"><link rel="prefetch" href="/docs/assets/js/47.2026c6cc.js"><link rel="prefetch" href="/docs/assets/js/48.b0f3d68f.js"><link rel="prefetch" href="/docs/assets/js/49.9d81175e.js"><link rel="prefetch" href="/docs/assets/js/5.1d876c62.js"><link rel="prefetch" href="/docs/assets/js/51.b16e53d7.js"><link rel="prefetch" href="/docs/assets/js/52.831b9cca.js"><link rel="prefetch" href="/docs/assets/js/53.4ce4ac34.js"><link rel="prefetch" href="/docs/assets/js/54.6d7ca762.js"><link rel="prefetch" href="/docs/assets/js/55.2bb32bbd.js"><link rel="prefetch" href="/docs/assets/js/56.388173c5.js"><link rel="prefetch" href="/docs/assets/js/57.cd784d78.js"><link rel="prefetch" href="/docs/assets/js/58.d994c1a9.js"><link rel="prefetch" href="/docs/assets/js/59.0665a00b.js"><link rel="prefetch" href="/docs/assets/js/6.bc091efc.js"><link rel="prefetch" href="/docs/assets/js/60.12f3479d.js"><link rel="prefetch" href="/docs/assets/js/61.679d1273.js"><link rel="prefetch" href="/docs/assets/js/62.04ef0d26.js"><link rel="prefetch" href="/docs/assets/js/63.70e8cd2b.js"><link rel="prefetch" href="/docs/assets/js/64.c7956833.js"><link rel="prefetch" href="/docs/assets/js/65.0304095c.js"><link rel="prefetch" href="/docs/assets/js/66.f16304a7.js"><link rel="prefetch" href="/docs/assets/js/67.d0a945f4.js"><link rel="prefetch" href="/docs/assets/js/68.26e1c58d.js"><link rel="prefetch" href="/docs/assets/js/69.ac162984.js"><link rel="prefetch" href="/docs/assets/js/7.255d7d5f.js"><link rel="prefetch" href="/docs/assets/js/70.5408bf05.js"><link rel="prefetch" href="/docs/assets/js/8.2117996a.js"><link rel="prefetch" href="/docs/assets/js/9.e855c324.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.2f643d57.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Leibnize 个人学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/rjwx60" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/rjwx60" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span></span> <span class="arrow down"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="一、基本"><a href="#一、基本" class="header-anchor">#</a> 一、基本</h3> <h4 id="_1-1、数据类型"><a href="#_1-1、数据类型" class="header-anchor">#</a> 1-1、数据类型</h4> <p>基本数据类型</p> <ul><li>boolean</li> <li>null</li> <li>undefined</li> <li>number</li> <li>string</li> <li>symbol</li> <li>bigint</li></ul> <p>引用数据类型：对象 Object，包含</p> <ul><li>普通对象-Object；</li> <li>数组对象-Array；</li> <li>正则对象-RegExp；</li> <li>日期对象-Date；</li> <li>数学函数-Math；</li> <li>函数对象-Function；</li></ul> <h5 id="_1-1-1、示例"><a href="#_1-1-1、示例" class="header-anchor">#</a> 1-1-1、示例</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span>
a<span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'子君'</span>
a<span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'君子'</span>

<span class="token comment">// 输出子君</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> e <span class="token operator">=</span> <span class="token punctuation">{</span>key<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> f <span class="token operator">=</span> <span class="token punctuation">{</span>key<span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">}</span>
d<span class="token punctuation">[</span>e<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'子君'</span>
d<span class="token punctuation">[</span>f<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'君子'</span>

<span class="token comment">// 输出君子</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 对于第一个输出，Symbol()函数会返回「symbol」类型的值，而Symbol函数传的参数仅仅是用于标识的，不会影响值的唯一性</span>
<span class="token comment">// 对于第二个输出， 因为e和f都是对象，而对象的key只能是数值或字符，所以会将对象转换为字符，对象的toString方法返回的是[object Object], 所有输出的是君子</span>
</code></pre></div><h4 id="_1-x、注意事项"><a href="#_1-x、注意事项" class="header-anchor">#</a> 1-X、注意事项</h4> <h5 id="_1-x-1、null"><a href="#_1-x-1、null" class="header-anchor">#</a> 1-X-1、null</h5> <p>虽然 typeof null 会输出 object，但这只是 JS 存在的一个悠久 Bug：</p> <ul><li>JS 的最初版本中使用是 32 位系统，为性能考虑使用低位1-3位存储变量的类型信息，000 开头代表是对象然而 null 表示为全零；</li> <li>比如：000 —&gt; 对象；010 —&gt; 浮点数；100 —&gt; 字符串；110 —&gt; 布尔值；</li> <li>然而：null 的所有机器码均为 0，故导致了 typeof 误判，且现有代码已经严重依赖这一bug表现，已永远不可能被修复：</li> <li>详情：https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof</li></ul> <p>与 undefiend 区别：</p> <ul><li>前者表示一个&quot;无&quot;的对象，也即**<u><em>此处不应该有值</em></u><strong>；而 undefined 表示</strong><u><em>未定义</em></u>**。</li> <li>在转换为数字时结果不同，Number(null) 为 0，而 undefined 为 NaN；</li></ul> <p>使用场景上：</p> <ul><li><p>前者作为函数的参数，表示该函数的参数不是对象；</p></li> <li><p>前者作为对象原型链的终点；</p></li> <li><p>后者在变量被声明但没有赋值时，就等于 undefined；</p></li> <li><p>后者调用函数时，应该提供的参数没有提供，该参数等于 undefined；</p></li> <li><p>后者对象没有赋值属性，该属性的值为 undefined；</p></li> <li><p>后者函数没有返回值时，默认返回 undefined；</p></li></ul> <h5 id="_1-x-2、基本包装类型"><a href="#_1-x-2、基本包装类型" class="header-anchor">#</a> 1-X-2、基本包装类型</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// '1'.toString() 之所以能执行</span>
<span class="token comment">// 是因为语句运行的过程中做了这样几件事情:</span>

<span class="token comment">// 1、创建 Object 类实例</span>
<span class="token comment">// 注意: 目前 ES6 规范不建议用 new 来创建基本类型的包装类；而由于 Symbol 和 BigInt 的出现，对它们调用 new 都会报错</span>
<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2、调用实例方法</span>
s<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3、执行完方法立即销毁这个实例</span>
s <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre></div><p>过程体现 <strong><u>基本包装类型</u></strong> 的性质，而基本包装类型恰恰属于基本数据类型，包括 Boolean、Number、String；</p> <h5 id="_1-x-3、精度问题"><a href="#_1-x-3、精度问题" class="header-anchor">#</a> 1-X-3、精度问题</h5> <p>0.1和0.2在转换成二进制后会无限循环，由于标准位数的限制后面多余的位数会被截掉，此时就已经出现了精度的损失，相加后因浮点数小数位的限制而截断的二进制数字在转换为十进制就会变成0.30000000000000004；</p> <h5 id="_1-x-3-1、精度现状"><a href="#_1-x-3-1、精度现状" class="header-anchor">#</a> 1-X-3-1、精度现状</h5> <p>在JS中，所有的数字都以双精度 64 位浮点格式表示，这导致 JS 中的 Number 无法精确表示非常大的整数，还会将非常大的整数四舍五入；确切地说：JS 中的Number 类型只能安全地表示 <code>-9007199254740991 (-(2^53-1)) 和 9007199254740991 ((2^53-1))间的数</code>，任何超出此范围的整数值都可能失去精度；</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">999999999999999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//=&gt;10000000000000000</span>
</code></pre></div><p>同时也会有一定的安全性问题:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">9007199254740992</span> <span class="token operator">===</span> <span class="token number">9007199254740993</span><span class="token punctuation">;</span>    <span class="token comment">// → true</span>
</code></pre></div><h5 id="_1-x-3-1、精度解决-bigint"><a href="#_1-x-3-1、精度解决-bigint" class="header-anchor">#</a> 1-X-3-1、精度解决—BigInt</h5> <p>BigInt 是一种新的数据类型，用于当整数值大于 Number 数据类型支持的范围时；这种数据类型允许安全地对 <code>大整数</code>  执行算术操作，表示高分辨率的时间戳，使用大整数 id 等等，而不需要使用库；</p> <h5 id="_1-x-3-1-1、创建"><a href="#_1-x-3-1-1、创建" class="header-anchor">#</a> 1-X-3-1-1、创建</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1、在数字末尾追加 n 创建 BigInt</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token number">9007199254740995n</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// → 9007199254740995n	</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token number">9007199254740995</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// → 9007199254740996</span>
<span class="token comment">// 2、使用 BigInt() 构造函数创建 BigInt</span>
<span class="token function">BigInt</span><span class="token punctuation">(</span><span class="token string">&quot;9007199254740995&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// → 9007199254740995n</span>
</code></pre></div><h5 id="_1-x-3-1-2、使用"><a href="#_1-x-3-1-2、使用" class="header-anchor">#</a> 1-X-3-1-2、使用</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">10n</span> <span class="token operator">+</span> <span class="token number">20n</span><span class="token punctuation">;</span>    <span class="token comment">// → 30n	</span>
<span class="token number">10n</span> <span class="token operator">-</span> <span class="token number">20n</span><span class="token punctuation">;</span>    <span class="token comment">// → -10n	</span>
<span class="token operator">+</span><span class="token number">10n</span><span class="token punctuation">;</span>         <span class="token comment">// → TypeError: Cannot convert a BigInt value to a number	</span>
<span class="token operator">-</span><span class="token number">10n</span><span class="token punctuation">;</span>         <span class="token comment">// → -10n	</span>
<span class="token number">10n</span> <span class="token operator">*</span> <span class="token number">20n</span><span class="token punctuation">;</span>    <span class="token comment">// → 200n	</span>
<span class="token number">20n</span> <span class="token operator">/</span> <span class="token number">10n</span><span class="token punctuation">;</span>    <span class="token comment">// → 2n	</span>
<span class="token number">23n</span> <span class="token operator">%</span> <span class="token number">10n</span><span class="token punctuation">;</span>    <span class="token comment">// → 3n	</span>
<span class="token number">10n</span> <span class="token operator">**</span> <span class="token number">3n</span><span class="token punctuation">;</span>    <span class="token comment">// → 1000n	</span>

<span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token number">10n</span><span class="token punctuation">;</span>	
<span class="token operator">++</span>x<span class="token punctuation">;</span>          <span class="token comment">// → 11n	</span>
<span class="token operator">--</span>x<span class="token punctuation">;</span>          <span class="token comment">// → 9n</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//&quot;bigint&quot;</span>
</code></pre></div><h5 id="_1-x-3-1-3、注意事项"><a href="#_1-x-3-1-3、注意事项" class="header-anchor">#</a> 1-X-3-1-3、注意事项</h5> <ul><li>BigInt 不支持一元加号运算符，可能是某些程序可能依赖于 + 始终生成 Number 的不变量，或抛出异常；另外，更改 + 的行为也会破坏 asm.js 代码；</li> <li>因隐式类型转换可能丢失信息，故不允许在 bigint 和 Number 间进行混合操作；
<ul><li>当混合使用大整数和浮点数时，结果值可能无法由 BigInt 或 Number 精确表示；</li></ul></li></ul> <div class="language- extra-class"><pre class="language-text"><code>10 + 10n;    // → TypeError
</code></pre></div><ul><li>不能将 BigInt 传递给 Web api 和内置的 JS 函数，这些函数需要一个 Number 类型的数字；尝试这样做会报 TypeError 错误；</li></ul> <div class="language- extra-class"><pre class="language-text"><code>Math.max(2n, 4n, 6n);    // → TypeError
</code></pre></div><ul><li>当 Boolean 类型与 BigInt 类型相遇时，BigInt 的处理方式与 Number 类似，即只要不是 0n，BigInt 即会被视为 truthy 值；</li></ul> <div class="language- extra-class"><pre class="language-text"><code>if(0n){ // 条件判断为false
}
if(3n){ // 条件为true
}
</code></pre></div><ul><li>元素均为 BigInt 的数组可进行 sort；</li> <li>BigInt 可正常地进行位运算，如|、&amp;、&lt;&lt;、&gt;&gt;、^；</li></ul> <h5 id="_1-x-3-1-4、兼容性"><a href="#_1-x-3-1-4、兼容性" class="header-anchor">#</a> 1-X-3-1-4、兼容性</h5> <img src="/Image/Basics/Special/Mode/3.png" align="" style="zoom:50%;"> <h3 id="二、检测"><a href="#二、检测" class="header-anchor">#</a> 二、检测</h3> <h4 id="_2-1、type-of"><a href="#_2-1、type-of" class="header-anchor">#</a> 2-1、type of</h4> <p><strong><u>对于原始类型，除 null 外，均可显示正确类型；</u></strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">typeof</span> <span class="token number">1</span> 					<span class="token comment">// 'number'</span>
<span class="token keyword">typeof</span> <span class="token string">'1'</span> 				<span class="token comment">// 'string'</span>
<span class="token keyword">typeof</span> <span class="token keyword">undefined</span> 	<span class="token comment">// 'undefined'</span>
<span class="token keyword">typeof</span> <span class="token boolean">true</span> 			<span class="token comment">// 'boolean'</span>
<span class="token keyword">typeof</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 	<span class="token comment">// 'symbol'</span>
<span class="token keyword">typeof</span> Symbol<span class="token punctuation">.</span>iterator 	<span class="token comment">// 'symbol'</span>
<span class="token keyword">typeof</span> <span class="token number">NaN</span> 				<span class="token comment">// 'number'</span>
<span class="token keyword">typeof</span> <span class="token number">Infinity</span> 	<span class="token comment">// 'number'</span>
<span class="token keyword">typeof</span> <span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 		<span class="token comment">// 'string' 因 Date 调用后返回字符串</span>
<span class="token keyword">typeof</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'number' 因 Math.sin 调用后返回数字</span>
</code></pre></div><p><strong><u>对于引用数据类型，除函数外，均显示 <code>&quot;object&quot;</code></u></strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">typeof</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> 					<span class="token comment">// 'object'</span>
<span class="token keyword">typeof</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> 					<span class="token comment">// 'object'</span>
<span class="token keyword">typeof</span> console<span class="token punctuation">.</span>log 	<span class="token comment">// 'function'</span>
<span class="token keyword">typeof</span> <span class="token keyword">new</span> <span class="token class-name">xxx</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 		<span class="token comment">// 'object'</span>
</code></pre></div><p><strong><u>使用 instance of 判断基本类型值</u></strong> <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/hasInstance" target="_blank" rel="noopener noreferrer">MDN上关于hasInstance的解释<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">PrimitiveNumber</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>hasInstance<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">'number'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">111</span> <span class="token keyword">instanceof</span> <span class="token class-name">PrimitiveNumber</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token comment">// 原理是使用 instanceof 方法重定义，换成 typeof</span>
</code></pre></div><h5 id="_2-1-1、示例"><a href="#_2-1-1、示例" class="header-anchor">#</a> 2-1-1、示例</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 输出 function</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 输出 object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">[</span><span class="token string">'前端有的玩'</span><span class="token punctuation">,</span><span class="token string">'公众号'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 输出 object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token comment">// 输出 undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span>
<span class="token comment">// 输出 function </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token comment">// 输出 false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子君'</span> <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span>
<span class="token comment">// 输出 true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-2、instance-of"><a href="#_2-2、instance-of" class="header-anchor">#</a> 2-2、instance of</h4> <h4 id="_2-3、万能法"><a href="#_2-3、万能法" class="header-anchor">#</a> 2-3、万能法</h4> <ul><li>基本类型 <code>null</code>：使用 <code>String(null)</code></li> <li>基本类型 (<code>string / number / boolean / undefined</code>) + <code>function</code>：直接使用 <code>typeof</code>；</li> <li>其余引用类型(<code>Array / Date / RegExp Error</code>)：调用 <code>toString</code> 后根据 <code>[object XXX]</code> 进行判断；</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> class2type <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token string">'Array Date RegExp Object Error'</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> class2type<span class="token punctuation">[</span> <span class="token string">'[object '</span> <span class="token operator">+</span> e <span class="token operator">+</span> <span class="token string">']'</span> <span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 

<span class="token keyword">function</span> <span class="token function">type</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> class2type<span class="token punctuation">[</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">'object'</span> <span class="token operator">:</span> <span class="token keyword">typeof</span> obj
<span class="token punctuation">}</span>
</code></pre></div><ul><li>终极大法：Object.prototype.toString.call</li></ul> <img src="/Image/Basics/Special/Data/2.png" align="" style="zoom:50%;"> <img src="/Image/Basics/Special/Data/3.png" align="" style="zoom:50%;"> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">whichType</span> <span class="token operator">=</span> <span class="token parameter">target</span> <span class="token operator">=&gt;</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// whichType() -&gt; &quot;undefined&quot;</span>
<span class="token comment">// whichType([]) -&gt; &quot;array&quot;</span>
</code></pre></div><h4 id="_2-4、示例"><a href="#_2-4、示例" class="header-anchor">#</a> 2-4、示例</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// https://blog.csdn.net/mevicky/article/details/50353881</span>
<span class="token comment">// ex1</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	x <span class="token operator">+=</span> <span class="token keyword">typeof</span> f<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
x<span class="token punctuation">;</span>
<span class="token string">&quot;1function&quot;</span>

<span class="token comment">// ex2</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">typeof</span> arguments
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token string">&quot;object&quot;</span>
</code></pre></div><h3 id="三、转换"><a href="#三、转换" class="header-anchor">#</a> 三、转换</h3> <h4 id="_3-1、基本"><a href="#_3-1、基本" class="header-anchor">#</a> 3-1、基本</h4> <h5 id="_3-1-1、基本"><a href="#_3-1-1、基本" class="header-anchor">#</a> 3-1-1、基本</h5> <p>JS 中通常将，类型转换/强制类型转换，统称为，强制类型转换；</p> <ul><li>分类：表现不明显的隐式强制类型转换、表现明显的显式强制类型转换；</li></ul> <p>JS 中强制类型转换总是返回基本类型值；</p> <ul><li>比如：字符串、数字、布尔值，但注意不会返回对象&amp;函数；</li></ul> <h5 id="_3-1-2、内部流程"><a href="#_3-1-2、内部流程" class="header-anchor">#</a> 3-1-2、内部流程</h5> <h5 id="_3-1-2-1、toprimitive"><a href="#_3-1-2-1、toprimitive" class="header-anchor">#</a> 3-1-2-1、ToPrimitive</h5> <p>原始值则直接输出；否则对象流程如下：</p> <ul><li>首先：调用 valueOf，若结果为基本类型值，则输出；</li> <li>否则：调用 toString，若结果为基本类型值，则输出；</li> <li>注意：其余抛出 TypeError 异常；</li> <li>注意：用 Object.create(null) 创建出来的对象，[[Prototype]] 属性为null，没有 valueOf、toString 方法</li></ul> <h5 id="_3-1-2-2、toboolean"><a href="#_3-1-2-2、toboolean" class="header-anchor">#</a> 3-1-2-2、ToBoolean</h5> <p>假值为 false；其他值为 true；</p> <ul><li>比如：<strong><u>undefined、null、false、+0、-0、NaN、空字符串、浏览器自行添加的假值对象</u></strong>；</li> <li>注意：浏览器在某些特定的情况下，会建立别的假值对象，目的是为了判断是否为老版本的浏览器，如 document.all；</li></ul> <h5 id="_3-1-2-3、tonumber"><a href="#_3-1-2-3、tonumber" class="header-anchor">#</a> 3-1-2-3、ToNumber</h5> <p>对象值：进行 ToPrimitive 转换；</p> <p>特殊值：<strong><u>null -&gt; 0、false -&gt; 0、true -&gt; 1、undefined -&gt; NaN</u></strong>；</p> <p>普通值：String 类型，遵循数字常量相关规则/语法，处理失败时转为 NaN；</p> <ul><li>比如：空字符串 -&gt; 0、&quot;1A&quot; -&gt; NaN；</li></ul> <img src="/Image/Basics/Special/Data/10.png" align="" style="zoom:50%;"> <h5 id="_3-1-2-4、tostring"><a href="#_3-1-2-4、tostring" class="header-anchor">#</a> 3-1-2-4、ToString</h5> <p>普通值：直接输出字符串；</p> <p>特殊值：<strong><u>null -&gt; &quot;null&quot;、undefined -&gt; &quot;undefined&quot;、true -&gt; &quot;true&quot;、(1.07*10^21).toString() -&gt; &quot;1.07e21&quot;</u></strong></p> <p>对象值：普通对象：调用内部 toString()，返回内部属性 [[Class]] 的值，(自定义方法的另计)；</p> <p>对象值：数组对象：同上，但数组 toString 经重新定义，所有元素字符串化会以逗号连接：比如：[1,2,3].toString() -&gt; &quot;1,2,3</p> <ul><li>注意：<strong><u>JSON.stringify() 转换过程使用了 toString；</u></strong> <ul><li>对特殊值的处理：undefined、function、symbol、包含循环引用的对象：
<ul><li>或报错：循环引用的对象；</li> <li>或忽略跳过：对象中的值；</li> <li>或返回 null：Symbol、空函数、undefined</li> <li>或返回 string：循环引用的对象且有 toJSON 方法；</li></ul></li> <li>对原始值处理：string、number、boolean、 null 与 toString 基本一致；</li> <li>对对象值处理：先调用内部 toJSON()，再调用 toString()；</li> <li><img src="/Image/Basics/Special/Data/11.png" align="" style="zoom:50%;"></li> <li><img src="/Image/Basics/Special/Data/12.png" align="" style="zoom:50%;"></li></ul></li> <li>注意：字符串转数字方式：<strong><u>*(/)、parseInt()、 parseFloat()、Number() 、new Number()</u></strong> <ul><li>其中 parse 前缀方法是解析，其余才是转换；</li> <li>两者区别：对非字符串部分的容忍度不同：Number 可用于任何数据类型，new Number 对于同样的输入会有返回不同结果；</li> <li>性能比较：<strong><u>*(/) &gt; Number &gt; parseInt / parseFloat &gt; new Number</u></strong></li></ul></li></ul> <img src="/Image/Basics/Special/Data/13.png" align="" style="zoom:50%;"> <h5 id="_3-1-3、注意事项"><a href="#_3-1-3、注意事项" class="header-anchor">#</a> 3-1-3、注意事项</h5> <h5 id="_3-1-3-1、条件控制语句"><a href="#_3-1-3-1、条件控制语句" class="header-anchor">#</a> 3-1-3-1、条件控制语句</h5> <ul><li>if while do-while()语句内部，会对值进行 ToBoolean 操作；</li> <li>isNaN 参数会先经过 toNumber 操作(故不可靠)；</li> <li>for( ..; ..; ..; )中的条件判断表达式，第二个；</li> <li>? : 中的条件判断表达式；</li> <li>if 中的条件判断表达式；</li> <li>|| 和 &amp;&amp; 左边的操作数；</li></ul> <div class="language- extra-class"><pre class="language-text"><code>isNaN('1') // false
</code></pre></div><h5 id="_3-1-3-2、toprimitive-操作"><a href="#_3-1-3-2、toprimitive-操作" class="header-anchor">#</a> 3-1-3-2、ToPrimitive 操作</h5> <ul><li>选择机制优先度(一般值)：valueOf &gt; toString：
<ul><li><img src="/Image/Basics/Special/Data/15.png" align="" style="zoom:50%;"></li></ul></li> <li>选择机制优先度(Date对象)：valueOf &lt; toString：若强制使用 Date 的 valueOf，则须使用一元加号 (+)，强制转换它为数字类型：
<ul><li><img src="/Image/Basics/Special/Data/16.png" align="" style="zoom:50%;"></li></ul></li> <li>强制将某对象的 valueOf、toString 方法，均覆写为返回值为对象会报错；
<ul><li><img src="/Image/Basics/Special/Data/17.png" align="" style="zoom:50%;"></li></ul></li> <li>引入 Symbol 类型后，JS 会优先调用对象的 [Symbol.toPrimitive]，来转为原始类型：
<ul><li><img src="/Image/Basics/Special/Data/18.png" align="" style="zoom:50%;"></li> <li><img src="/Image/Basics/Special/Data/19.png" align="" style="zoom:50%;"></li></ul></li> <li>空对象与空数组的 valueOf &amp; toString 方法；
<ul><li><img src="/Image/Basics/Special/Data/20.png" align="" style="zoom:50%;"></li></ul></li> <li>特殊：引擎会将 花括号开头 { 视为一个区块语句的开头而忽略掉；
<ul><li>故例1实际效果为+{} 但不同浏览器引擎对此种处理不一致，有些返回 NaN，有些返回 &quot;[object Object][object Object]&quot;</li> <li><img src="/Image/Basics/Special/Data/21.png" align="" style="zoom:50%;"></li></ul></li> <li>其他示例
<ul><li><img src="/Image/Basics/Special/Data/22.png" align="" style="zoom:50%;"></li></ul></li></ul> <h5 id="_3-1-3-3、json-stringify-操作"><a href="#_3-1-3-3、json-stringify-操作" class="header-anchor">#</a> 3-1-3-3、JSON.stringify 操作</h5> <ul><li>空函数、undefined、Symbol 返回 null、循环引用报错、含 toJSON 则调用
<ul><li><img src="/Image/Basics/Special/Data/23.png" align="" style="zoom:50%;"></li></ul></li></ul> <h5 id="_3-1-3-4、tostring-操作"><a href="#_3-1-3-4、tostring-操作" class="header-anchor">#</a> 3-1-3-4、ToString 操作</h5> <img src="/Image/Basics/Special/Data/24.png" align="" style="zoom:50%;"> <h5 id="_3-1-3-5、tonumber-操作"><a href="#_3-1-3-5、tonumber-操作" class="header-anchor">#</a> 3-1-3-5、ToNumber 操作</h5> <ul><li><p>+ 操作符转换规则：</p> <ul><li>一有对象，则进行 toPrimitive 操作，即 valueOf toString；</li> <li>一有字符，则进行字符串拼接；</li> <li>若均没有，则进行加法运算；
<ul><li>注意：操作符的顺序；比如：1+2+'3' == '33'； 1+'2'+3 == '123'；</li> <li>注意：+ Date对象，转换成数字，从而获得当前时间的时间戳(微秒)；</li> <li>注意：&quot;x + ''  相当于 String(x)</li> <li><img src="/Image/Basics/Special/Data/25.png" align="" style="zoom:50%;"></li> <li><img src="/Image/Basics/Special/Data/32.png" align="" style="zoom:50%;"></li></ul></li></ul></li> <li><p>+ 操作符不一定返回 number，但 ++ 操作符一定返回 number</p> <ul><li><div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">++</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// 1</span>
</code></pre></div></li></ul></li> <li><p>+ x 或 x - 0 或 x * 1 或 x / 1 相当于 Number( x ) ；且 ++ 加变量，而不能加常量；</p> <ul><li><img src="/Image/Basics/Special/Data/26.png" align="" style="zoom:50%;"></li></ul></li> <li><p>null 在计算时候转换为0，效果等同 0；</p> <ul><li><img src="/Image/Basics/Special/Data/27.png" align="" style="zoom:50%;"></li></ul></li> <li><p>&gt;、&lt;、&lt;=、&gt;= 转换规则；</p> <ul><li><img src="/Image/Basics/Special/Data/28.png" align="" style="zoom:50%;"></li> <li><img src="/Image/Basics/Special/Data/29.png" align="" style="zoom:50%;"></li></ul></li> <li><p>~x 相当于 -(x+1)；!!x 相当于 Boolean( x )；</p> <ul><li><img src="/Image/Basics/Special/Data/30.png" align="" style="zoom:50%;"></li></ul></li> <li><p>其他示例：</p> <ul><li><img src="/Image/Basics/Special/Data/31.png" align="" style="zoom:50%;"></li></ul></li></ul> <h5 id="_3-1-3-6、-和-转换"><a href="#_3-1-3-6、-和-转换" class="header-anchor">#</a> 3-1-3-6、&amp;&amp;  和 || 转换</h5> <ul><li><p>&amp;&amp; 前假返前，前真返后，亦称守护运算符</p> <ul><li>只要 &quot;&amp;&amp;&quot; 前面是 false，无论 &quot;&amp;&amp;&quot; 后面是 true 还是 false，结果都将返 &quot;&amp;&amp;&quot; 前面的值；</li> <li>只要 &quot;&amp;&amp;&quot; 前面是 true，无论 &quot;&amp;&amp;&quot; 后面是 true 还是 false，结果都将返 &quot;&amp;&amp;&quot; 后面的值；
<ul><li>所以：a &amp;&amp; b 大致相当于 a ? b : a；</li> <li>比如：1&amp;&amp;2 返回 2</li></ul></li></ul></li> <li><p>|| 前假返后，前真返前</p> <ul><li>只要&quot;||&quot;前面为 false，不管&quot;||&quot;后面是 true 还是 false，都返回&quot;||&quot;后面的值；</li> <li>只要&quot;||&quot;前面为 true，不管&quot;||&quot;后面是 true 还是 false，都返回&quot;||&quot;前面的值；
<ul><li>所以：a || b 大致相当于  a ? a : b</li> <li>比如：0||1  返回 1</li></ul></li></ul></li></ul> <h5 id="_3-1-3-x、其他"><a href="#_3-1-3-x、其他" class="header-anchor">#</a> 3-1-3-X、其他</h5> <img src="/Image/Basics/Special/Data/33.png" align="" style="zoom:50%;"> <img src="/Image/Basics/Special/Data/34.png" align="" style="zoom:50%;"> <h4 id="_3-x、总结"><a href="#_3-x、总结" class="header-anchor">#</a> 3-X、总结</h4> <h5 id="_3-1-1、基本-2"><a href="#_3-1-1、基本-2" class="header-anchor">#</a> 3-1-1、基本</h5> <p>JS中，类型转换只有三种：</p> <ul><li>转换成数字</li> <li>转换成布尔值</li> <li>转换成字符串</li></ul> <img src="/Image/Basics/Special/Data/1.png" align="" style="zoom:50%;"> <h5 id="_3-1-2、运算符转换"><a href="#_3-1-2、运算符转换" class="header-anchor">#</a> 3-1-2、运算符转换</h5> <p>JS 中在使用运算符号或者对比符时，会自带隐式转换，规则如下:</p> <ul><li>-、*、/、% ：一律转换成数值后计算</li> <li>+：
<ul><li>数字 + 字符串 = 字符串， 运算顺序是从左到右</li> <li>数字 + 对象， 优先调用对象的<code>valueOf</code> -&gt; <code>toString</code></li> <li>数字 + <code>boolean/null</code> -&gt; 数字</li> <li>数字 + <code>undefined</code> -&gt; <code>NaN</code></li></ul></li> <li><code>[1].toString() === '1'</code></li> <li><code>{}.toString() === '[object object]'</code></li> <li><code>NaN</code> !== <code>NaN</code> 、<code>+undefined 为 NaN</code></li></ul> <h4 id="_3-2、相等性判断"><a href="#_3-2、相等性判断" class="header-anchor">#</a> 3-2、相等性判断</h4> <h5 id="_3-2-1、js-4种相等算法"><a href="#_3-2-1、js-4种相等算法" class="header-anchor">#</a> 3-2-1、JS 4种相等算法</h5> <p>抽象相等比较、严格相等比较、同值零、同值( 用于所有其他地方)</p> <ul><li>第二种：Array.prototype.indexOf、Array.prototype.lastIndexOf、case-matching 使用到；</li> <li>第三种：%TypedArray%、ArrayBuffer 构造函数、Map、Set操作、String.prototype.includes 使用到；</li></ul> <h5 id="_3-2-2、js3种值比较操作"><a href="#_3-2-2、js3种值比较操作" class="header-anchor">#</a> 3-2-2、JS3种值比较操作</h5> <p>严格相等、宽松相等、<a href="http://Object.is" target="_blank" rel="noopener noreferrer">Object.is<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h5 id="_3-2-3、双等判断"><a href="#_3-2-3、双等判断" class="header-anchor">#</a> 3-2-3、双等判断</h5> <p>特点：值相等；进行类型转换操作，转换规则如下</p> <ul><li>两边类型是否相同，相同则比较值是否相同；</li> <li>若类型是 null 和 undefined，则返回 true；</li> <li>若其中一方是 Boolean、String，且另一方为 Number，则将 Boolean、String 转换成 Number，再进行比较；</li> <li>若其中一方为 Object，且另一方为 String、Number、Symbol，则将 Object 转换成字符串，再进行比较；
<ul><li><strong><u>对象转原始类型</u></strong>：会调用内置的 [ToPrimitive] 函数，函数操作逻辑如下：
<ul><li>若存在 Symbol.toPrimitive() 方法，则优先调用并返回；</li> <li>调用 valueOf，若转换为原始类型，则返回；</li> <li>调用 toString，若转换为原始类型，则返回；</li> <li>注意：若上述方法均无返回原始类型，会报错；</li></ul></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Ex1:</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>							<span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token string">&quot;[object Object]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//true</span>

<span class="token comment">// Ex2:</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">4</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'5'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">6</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出7</span>


<span class="token comment">// Ex3:</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token function-variable function">valueOf</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token comment">// Ex4:</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// true</span>
<span class="token comment">// == 中，左右两边都需要转换为数字然后进行比较。</span>
<span class="token comment">// [] 转换为数字为 0；</span>
<span class="token comment">// ![] 首先是转换为布尔值，由于 [] 作为一个引用类型转换为布尔值为 true, 因此 ![] 为 false，进而在转换成数字，变为 0</span>
</code></pre></div><img src="/Image/Basics/Special/Data/4.png" align="" style="zoom:50%;"> <ul><li>其他：数组，调用valueOf、再调用toString，比如：空数组转为空字符串，再转换为数字0；</li> <li>其他：null 与 undefined 相等，不会做隐式类型转换；</li> <li>其他：转换优先级：对象 &gt; 布尔值 &gt; 字符串；</li> <li>其他：遇到 ! 先使用 toBoolean 转换；</li></ul> <img src="/Image/Basics/Special/Data/5.png" align="" style="zoom:50%;"> <img src="/Image/Basics/Special/Data/6.png" align="" style="zoom:50%;"> <h5 id="_3-2-4、三等判断"><a href="#_3-2-4、三等判断" class="header-anchor">#</a> 3-2-4、三等判断</h5> <p>特点：严格相等；不进行类型转换、先后比较类型和值</p> <img src="/Image/Basics/Special/Data/7.png" align="" style="zoom:50%;"> <h5 id="_3-2-5、object-is"><a href="#_3-2-5、object-is" class="header-anchor">#</a> 3-2-5、Object.is</h5> <p>行为与全等类似，但只用于 NaN 和 -0 和 +0 的特殊用途判断：</p> <p>Object 在严格等于的基础上修复了一些特殊情况下的失误，具体来说就是 +0 和 -0，NaN 和 NaN；</p> <img src="/Image/Basics/Special/Data/8.png" align="" style="zoom:50%;"> <h5 id="_3-2-6、总结"><a href="#_3-2-6、总结" class="header-anchor">#</a> 3-2-6、总结</h5> <img src="/Image/Basics/Special/Data/9.png" align="" style="zoom:50%;"> <h5 id="_3-2-7、示例"><a href="#_3-2-7、示例" class="header-anchor">#</a> 3-2-7、示例</h5> <ul><li>示例1：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// title</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token operator">?</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token parameter">a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span>

<span class="token comment">// Way1</span>
<span class="token comment">// 由对象的隐式转换 toPrimitive 操作机制知，用自增改动 valueOf 即可</span>
a <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token function-variable function">valueOf</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">toString</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Way2</span>
<span class="token comment">// 直接定义 get ；此外此法还适用于：(a === 1 &amp;&amp; a === 2 &amp;&amp; a ===3)</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>global<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Way3</span>
<span class="token comment">// 由对象的隐式转换 toPrimitive 操作机制知，用 Generator 改动 valueOf ；</span>
a <span class="token operator">=</span> <span class="token punctuation">{</span>
  gn<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">yield</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">yield</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gn<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Way4</span>
<span class="token comment">// 直接重定义 toPrimitive 操作；</span>
a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span> Symbool<span class="token punctuation">.</span>toPromitive <span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>__val__ <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>__val__ <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token comment">// Way5</span>
<span class="token comment">// 对象 -&gt; toPrimitive操作 -&gt; toString -&gt; </span>
<span class="token comment">// 注意：数组对象，toString 方法返回字符串，元素由逗号隔开；</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>join <span class="token operator">=</span> a<span class="token punctuation">.</span>shift<span class="token punctuation">;</span>
</code></pre></div><ul><li>示例2：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 1 3</span>
<span class="token comment">// 题1和题2左右均被转成数字   </span>
<span class="token comment">// 题3被转成boolean   </span>
<span class="token comment">// 题4 地址不一样，两 Object 双等即全等比较，比较的是地址；</span>
</code></pre></div><h4 id="四、优先级"><a href="#四、优先级" class="header-anchor">#</a> 四、优先级</h4> <img src="/Image/Basics/Special/Data/35.png" align="" style="zoom:70%;"> <ul><li><p>JS 表达式包含表达式时，运算顺序是从左至右；</p></li> <li><p>加号优先级 &gt; 三目运算符</p> <ul><li><img src="/Image/Basics/Special/Data/36.png" align="" style="zoom:50%;"></li></ul></li> <li><p>模数运算保留符号，注意后2个，前者结果为-1，后者结果为NaN</p> <ul><li><img src="/Image/Basics/Special/Data/37.png" align="" style="zoom:50%;"></li></ul></li> <li><p>! 优先级 &gt; in</p> <ul><li><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token string">'a'</span> <span class="token keyword">in</span> window<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div></li></ul></li> <li><p>++ 优先级 &gt; ==</p> <ul><li><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token operator">++</span>i <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div></li></ul></li> <li><p>三目运算符优先级 &gt; 赋值运算符；</p> <ul><li><div class="language-js extra-class"><pre class="language-js"><code>b <span class="token operator">=</span> a <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// true</span>
</code></pre></div></li></ul></li></ul> <h4 id="五、自测题"><a href="#五、自测题" class="header-anchor">#</a> 五、自测题</h4> <img src="/Image/Basics/Special/Data/38.png" align="" style="zoom:50%;"> <img src="/Image/Basics/Special/Data/39.png" align="" style="zoom:50%;"> <img src="/Image/Basics/Special/Data/40.png" align="" style="zoom:50%;"> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">true</span> <span class="token operator">+</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

<span class="token comment">// 1、</span>
<span class="token comment">// 输出 &quot;&quot; 空字符串</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 输出的是空字符串&quot;&quot;， 包装类型在运算的时候，会先调用valueOf方法，如果valueOf返回的还是包装类型，那么再调用toString方法</span>
<span class="token comment">// 还是 数组</span>
<span class="token keyword">const</span> val <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 数组 toString 默认会将数组各项使用逗号 &quot;,&quot; 隔开, 比如 [1,2,3].toSting 变成了&quot;1,2,3&quot;,空数组 toString 就是空字符串</span>
<span class="token keyword">const</span> val1 <span class="token operator">=</span> val<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// val1 是空字符串</span>


<span class="token comment">// 2、</span>
<span class="token comment">// 输出 &quot;[object Object]&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>


<span class="token comment">// 3、</span>
<span class="token comment">// 这个输出 false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 套用上面第三条 将 false 转换为 数值</span>
<span class="token comment">// 这个输出 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 包装类型与 基本类型 == 先将包装类型通过 valueOf toString 转换为基本类型 </span>
<span class="token comment">// 输出 &quot;&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 套用第2条， 将空字符串转换为数值、</span>
<span class="token comment">// 输出 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 所以</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>



<span class="token comment">// 4、</span>
<span class="token comment">// 两个基本类型相加，如果其中一方是字符，则将其他的转换为字符相加，否则将类型转换为Number,然后相加, Number(true) 是1, Number(false)是0, 所以结果是 1</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.cda475f7.js" defer></script><script src="/docs/assets/js/2.c902c426.js" defer></script><script src="/docs/assets/js/50.1a00f734.js" defer></script>
  </body>
</html>
