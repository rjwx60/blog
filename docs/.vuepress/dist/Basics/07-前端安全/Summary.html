<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>总结 | Leibnize 个人学习笔记</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="素材整理自网络，仅供个人学习记录之用">
    <link rel="preload" href="/assets/css/0.styles.4c1fe16c.css" as="style"><link rel="preload" href="/assets/js/app.58d463af.js" as="script"><link rel="preload" href="/assets/js/3.5b6bd7ce.js" as="script"><link rel="preload" href="/assets/js/1.53e5735b.js" as="script"><link rel="preload" href="/assets/js/121.5983ebbd.js" as="script"><link rel="prefetch" href="/assets/js/10.47a34be1.js"><link rel="prefetch" href="/assets/js/100.2f7c82fb.js"><link rel="prefetch" href="/assets/js/101.57a81617.js"><link rel="prefetch" href="/assets/js/102.8befc7fd.js"><link rel="prefetch" href="/assets/js/103.c690f409.js"><link rel="prefetch" href="/assets/js/104.c8b86b63.js"><link rel="prefetch" href="/assets/js/105.9bac0b69.js"><link rel="prefetch" href="/assets/js/106.77dcd9f8.js"><link rel="prefetch" href="/assets/js/107.305a0cd6.js"><link rel="prefetch" href="/assets/js/108.197f379c.js"><link rel="prefetch" href="/assets/js/109.ed1f6dd8.js"><link rel="prefetch" href="/assets/js/11.d67029e2.js"><link rel="prefetch" href="/assets/js/110.b10adffc.js"><link rel="prefetch" href="/assets/js/111.27cb5e44.js"><link rel="prefetch" href="/assets/js/112.598f5429.js"><link rel="prefetch" href="/assets/js/113.b7f9fe99.js"><link rel="prefetch" href="/assets/js/114.cb9df12d.js"><link rel="prefetch" href="/assets/js/115.4d812f2c.js"><link rel="prefetch" href="/assets/js/116.3a4f5195.js"><link rel="prefetch" href="/assets/js/117.be29161e.js"><link rel="prefetch" href="/assets/js/118.eb6b99b9.js"><link rel="prefetch" href="/assets/js/119.b3f342d7.js"><link rel="prefetch" href="/assets/js/12.f13f81de.js"><link rel="prefetch" href="/assets/js/120.f343ff14.js"><link rel="prefetch" href="/assets/js/122.8dd46465.js"><link rel="prefetch" href="/assets/js/123.71ffc4a2.js"><link rel="prefetch" href="/assets/js/124.4e568dbe.js"><link rel="prefetch" href="/assets/js/125.43b22375.js"><link rel="prefetch" href="/assets/js/126.6522a7eb.js"><link rel="prefetch" href="/assets/js/127.8308b909.js"><link rel="prefetch" href="/assets/js/128.1fd06c87.js"><link rel="prefetch" href="/assets/js/129.91e28eff.js"><link rel="prefetch" href="/assets/js/13.ac76083d.js"><link rel="prefetch" href="/assets/js/130.5027f9f0.js"><link rel="prefetch" href="/assets/js/131.4554c2f2.js"><link rel="prefetch" href="/assets/js/132.c643aed4.js"><link rel="prefetch" href="/assets/js/133.5e499634.js"><link rel="prefetch" href="/assets/js/134.59b1b330.js"><link rel="prefetch" href="/assets/js/135.da46fa8a.js"><link rel="prefetch" href="/assets/js/136.3a67d738.js"><link rel="prefetch" href="/assets/js/137.4d5f5f5e.js"><link rel="prefetch" href="/assets/js/138.1fe93dba.js"><link rel="prefetch" href="/assets/js/139.d7f54242.js"><link rel="prefetch" href="/assets/js/14.8e5c3120.js"><link rel="prefetch" href="/assets/js/140.82be0f82.js"><link rel="prefetch" href="/assets/js/141.979c5a91.js"><link rel="prefetch" href="/assets/js/142.658ae82d.js"><link rel="prefetch" href="/assets/js/143.17532399.js"><link rel="prefetch" href="/assets/js/144.dc947607.js"><link rel="prefetch" href="/assets/js/145.fc89bd8c.js"><link rel="prefetch" href="/assets/js/146.a5e1b7eb.js"><link rel="prefetch" href="/assets/js/147.0f8384fc.js"><link rel="prefetch" href="/assets/js/148.fccbb459.js"><link rel="prefetch" href="/assets/js/149.d2d32bbc.js"><link rel="prefetch" href="/assets/js/15.e17af96c.js"><link rel="prefetch" href="/assets/js/150.73f88a17.js"><link rel="prefetch" href="/assets/js/151.dd85d521.js"><link rel="prefetch" href="/assets/js/152.ca632725.js"><link rel="prefetch" href="/assets/js/153.02b859a6.js"><link rel="prefetch" href="/assets/js/154.268e5dd0.js"><link rel="prefetch" href="/assets/js/155.0df9a80c.js"><link rel="prefetch" href="/assets/js/156.0e786e96.js"><link rel="prefetch" href="/assets/js/157.79cdcd86.js"><link rel="prefetch" href="/assets/js/158.8a131380.js"><link rel="prefetch" href="/assets/js/159.7aed0b17.js"><link rel="prefetch" href="/assets/js/16.472bfca7.js"><link rel="prefetch" href="/assets/js/160.31daa77a.js"><link rel="prefetch" href="/assets/js/161.a44e6bf4.js"><link rel="prefetch" href="/assets/js/162.86180287.js"><link rel="prefetch" href="/assets/js/163.c9fd632a.js"><link rel="prefetch" href="/assets/js/164.15e04e68.js"><link rel="prefetch" href="/assets/js/165.69bcb02b.js"><link rel="prefetch" href="/assets/js/166.084ab8e2.js"><link rel="prefetch" href="/assets/js/167.0f42977a.js"><link rel="prefetch" href="/assets/js/168.a4474b7b.js"><link rel="prefetch" href="/assets/js/169.3d05b3ba.js"><link rel="prefetch" href="/assets/js/17.f9d21c6e.js"><link rel="prefetch" href="/assets/js/170.484ffe30.js"><link rel="prefetch" href="/assets/js/171.01628965.js"><link rel="prefetch" href="/assets/js/172.2dc6c763.js"><link rel="prefetch" href="/assets/js/173.4fa13f79.js"><link rel="prefetch" href="/assets/js/174.5da03623.js"><link rel="prefetch" href="/assets/js/175.7c3cae2a.js"><link rel="prefetch" href="/assets/js/176.3df0d63b.js"><link rel="prefetch" href="/assets/js/177.3aa8d705.js"><link rel="prefetch" href="/assets/js/178.5b48450e.js"><link rel="prefetch" href="/assets/js/179.3a963dce.js"><link rel="prefetch" href="/assets/js/18.8314222e.js"><link rel="prefetch" href="/assets/js/180.d67c14c9.js"><link rel="prefetch" href="/assets/js/181.c7bf4046.js"><link rel="prefetch" href="/assets/js/182.4a4705fd.js"><link rel="prefetch" href="/assets/js/183.9183a7da.js"><link rel="prefetch" href="/assets/js/184.290760c3.js"><link rel="prefetch" href="/assets/js/185.64cd4609.js"><link rel="prefetch" href="/assets/js/186.2940410e.js"><link rel="prefetch" href="/assets/js/187.12b14c61.js"><link rel="prefetch" href="/assets/js/188.1fea2b8b.js"><link rel="prefetch" href="/assets/js/189.04b7d343.js"><link rel="prefetch" href="/assets/js/19.ed77427b.js"><link rel="prefetch" href="/assets/js/190.a7d6ec94.js"><link rel="prefetch" href="/assets/js/191.8ad7d925.js"><link rel="prefetch" href="/assets/js/192.2fd0c8f8.js"><link rel="prefetch" href="/assets/js/193.4f8a87cd.js"><link rel="prefetch" href="/assets/js/194.9e2e73ca.js"><link rel="prefetch" href="/assets/js/195.c6292340.js"><link rel="prefetch" href="/assets/js/196.b7ff135e.js"><link rel="prefetch" href="/assets/js/197.83a7d260.js"><link rel="prefetch" href="/assets/js/198.530f7c9c.js"><link rel="prefetch" href="/assets/js/199.c5048869.js"><link rel="prefetch" href="/assets/js/20.09503993.js"><link rel="prefetch" href="/assets/js/200.3435c341.js"><link rel="prefetch" href="/assets/js/201.1e492eea.js"><link rel="prefetch" href="/assets/js/202.f7b55746.js"><link rel="prefetch" href="/assets/js/203.08e404b6.js"><link rel="prefetch" href="/assets/js/204.1bc4bdd8.js"><link rel="prefetch" href="/assets/js/21.38c15b75.js"><link rel="prefetch" href="/assets/js/22.ae59de53.js"><link rel="prefetch" href="/assets/js/23.1c6d3160.js"><link rel="prefetch" href="/assets/js/24.28c7c43e.js"><link rel="prefetch" href="/assets/js/25.e53d1234.js"><link rel="prefetch" href="/assets/js/26.6fe14a49.js"><link rel="prefetch" href="/assets/js/27.910bdd9c.js"><link rel="prefetch" href="/assets/js/28.9d9cd019.js"><link rel="prefetch" href="/assets/js/29.525906aa.js"><link rel="prefetch" href="/assets/js/30.8a1a47c0.js"><link rel="prefetch" href="/assets/js/31.750a297b.js"><link rel="prefetch" href="/assets/js/32.290c8619.js"><link rel="prefetch" href="/assets/js/33.885855c1.js"><link rel="prefetch" href="/assets/js/34.fb5b3f84.js"><link rel="prefetch" href="/assets/js/35.22021291.js"><link rel="prefetch" href="/assets/js/36.6736dcbf.js"><link rel="prefetch" href="/assets/js/37.50fc071e.js"><link rel="prefetch" href="/assets/js/38.a6f00886.js"><link rel="prefetch" href="/assets/js/39.e5f0c600.js"><link rel="prefetch" href="/assets/js/4.4c62e10b.js"><link rel="prefetch" href="/assets/js/40.7eaf6de1.js"><link rel="prefetch" href="/assets/js/41.c55fd828.js"><link rel="prefetch" href="/assets/js/42.2c5aaafc.js"><link rel="prefetch" href="/assets/js/43.6c939d74.js"><link rel="prefetch" href="/assets/js/44.22ccc866.js"><link rel="prefetch" href="/assets/js/45.56a056b8.js"><link rel="prefetch" href="/assets/js/46.6901927f.js"><link rel="prefetch" href="/assets/js/47.78460423.js"><link rel="prefetch" href="/assets/js/48.12fddaae.js"><link rel="prefetch" href="/assets/js/49.55f5515e.js"><link rel="prefetch" href="/assets/js/5.97a7c0dc.js"><link rel="prefetch" href="/assets/js/50.5c665644.js"><link rel="prefetch" href="/assets/js/51.9fbd3941.js"><link rel="prefetch" href="/assets/js/52.f3a93332.js"><link rel="prefetch" href="/assets/js/53.f7c91d71.js"><link rel="prefetch" href="/assets/js/54.035bd227.js"><link rel="prefetch" href="/assets/js/55.9d4300de.js"><link rel="prefetch" href="/assets/js/56.1fa21a7d.js"><link rel="prefetch" href="/assets/js/57.c6af5e20.js"><link rel="prefetch" href="/assets/js/58.8c0baaa7.js"><link rel="prefetch" href="/assets/js/59.63f1befc.js"><link rel="prefetch" href="/assets/js/6.8e992509.js"><link rel="prefetch" href="/assets/js/60.35539f20.js"><link rel="prefetch" href="/assets/js/61.0872b63b.js"><link rel="prefetch" href="/assets/js/62.6749d184.js"><link rel="prefetch" href="/assets/js/63.0a8a07d3.js"><link rel="prefetch" href="/assets/js/64.a2eeb6f7.js"><link rel="prefetch" href="/assets/js/65.d78ecb46.js"><link rel="prefetch" href="/assets/js/66.1e1a87a2.js"><link rel="prefetch" href="/assets/js/67.b550d647.js"><link rel="prefetch" href="/assets/js/68.68258f2e.js"><link rel="prefetch" href="/assets/js/69.9f502a69.js"><link rel="prefetch" href="/assets/js/7.159745e4.js"><link rel="prefetch" href="/assets/js/70.c9b2fe76.js"><link rel="prefetch" href="/assets/js/71.b7b04483.js"><link rel="prefetch" href="/assets/js/72.edb7dfe5.js"><link rel="prefetch" href="/assets/js/73.869de1e4.js"><link rel="prefetch" href="/assets/js/74.7816f275.js"><link rel="prefetch" href="/assets/js/75.0457b07c.js"><link rel="prefetch" href="/assets/js/76.79a2eaee.js"><link rel="prefetch" href="/assets/js/77.66cfa995.js"><link rel="prefetch" href="/assets/js/78.9dd75caf.js"><link rel="prefetch" href="/assets/js/79.f6111e69.js"><link rel="prefetch" href="/assets/js/8.b79c23ae.js"><link rel="prefetch" href="/assets/js/80.fff0a469.js"><link rel="prefetch" href="/assets/js/81.42c5ebec.js"><link rel="prefetch" href="/assets/js/82.ca2f7f18.js"><link rel="prefetch" href="/assets/js/83.ed547319.js"><link rel="prefetch" href="/assets/js/84.377155d9.js"><link rel="prefetch" href="/assets/js/85.e5aab871.js"><link rel="prefetch" href="/assets/js/86.14705636.js"><link rel="prefetch" href="/assets/js/87.502cb8e9.js"><link rel="prefetch" href="/assets/js/88.d8f271ec.js"><link rel="prefetch" href="/assets/js/89.3e9deca1.js"><link rel="prefetch" href="/assets/js/9.23c0899b.js"><link rel="prefetch" href="/assets/js/90.4de4929c.js"><link rel="prefetch" href="/assets/js/91.307ce9fd.js"><link rel="prefetch" href="/assets/js/92.47e69683.js"><link rel="prefetch" href="/assets/js/93.34abda4c.js"><link rel="prefetch" href="/assets/js/94.00078270.js"><link rel="prefetch" href="/assets/js/95.4c9ca2ce.js"><link rel="prefetch" href="/assets/js/96.9121392c.js"><link rel="prefetch" href="/assets/js/97.41f6bdb8.js"><link rel="prefetch" href="/assets/js/98.4524a102.js"><link rel="prefetch" href="/assets/js/99.7d313788.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4c1fe16c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-dad8a512><div data-v-dad8a512><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-dad8a512 data-v-dad8a512><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-dad8a512 data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>Leibnize 个人学习笔记</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>Leibnize 个人学习笔记</span>
            
          <!---->
          2020
        </a></span></div></div> <div class="hide" data-v-dad8a512><header class="navbar" data-v-dad8a512><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Leibnize 个人学习笔记</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Basics/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  基本
</a></div><div class="nav-item"><a href="/NetWork/" class="nav-link"><i class="iconfont undefined"></i>
  网络
</a></div><div class="nav-item"><a href="https://github.com/rjwx60" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-dad8a512></div> <aside class="sidebar" data-v-dad8a512><div class="personal-info-wrapper" data-v-ca798c94 data-v-dad8a512><!----> <h3 class="name" data-v-ca798c94>
    Leibnize 个人学习笔记
  </h3> <div class="num" data-v-ca798c94><div data-v-ca798c94><h3 data-v-ca798c94>0</h3> <h6 data-v-ca798c94>Article</h6></div> <div data-v-ca798c94><h3 data-v-ca798c94>0</h3> <h6 data-v-ca798c94>Tag</h6></div></div> <hr data-v-ca798c94></div> <nav class="nav-links"><div class="nav-item"><a href="/Basics/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  基本
</a></div><div class="nav-item"><a href="/NetWork/" class="nav-link"><i class="iconfont undefined"></i>
  网络
</a></div><div class="nav-item"><a href="https://github.com/rjwx60" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端专题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Basics/01-前端基础" class="sidebar-heading clickable"><span>01-前端基本</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Basics/02-前端性能" class="sidebar-heading clickable"><span>02-前端性能</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Basics/03-前端工程" class="sidebar-heading clickable"><span>03-前端工程</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Basics/04-前端异步" class="sidebar-heading clickable"><span>04-前端异步</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Basics/05-前端设计" class="sidebar-heading clickable"><span>05-前端设计</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Basics/06-前端数据" class="sidebar-heading clickable"><span>06-前端数据</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Basics/07-前端安全" class="sidebar-heading clickable open"><span>07-前端安全</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/Basics/07-前端安全/XSS.html" class="sidebar-link">一、XSS</a></li><li><a href="/Basics/07-前端安全/CSRF.html" class="sidebar-link">二、CSRF</a></li><li><a href="/Basics/07-前端安全/劫持.html" class="sidebar-link">三、劫持</a></li><li><a href="/Basics/07-前端安全/其他安全问题.html" class="sidebar-link">四、其他安全问题</a></li><li><a href="/Basics/07-前端安全/Summary.html" class="active sidebar-link">五、Summary</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Basics/08-前端概念" class="sidebar-heading clickable"><span>08-前端概念</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Basics/09-前端实现" class="sidebar-heading clickable"><span>09-前端实现</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Basics/10-前端新标" class="sidebar-heading clickable"><span>10-前端新标</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Basics/11-前端会话" class="sidebar-heading clickable"><span>11-前端会话</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Basics/12-前端框架" class="sidebar-heading clickable"><span>12-前端框架</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Basics/14-浏览器相关" class="sidebar-heading clickable"><span>14-浏览器相关</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Basics/15-前端核心" class="sidebar-heading clickable"><span>15-前端核心</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Basics/16-前端Node" class="sidebar-heading clickable"><span>16-前端Node</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e></h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>Leibnize 个人学习笔记</span>
            
          <!---->
          2020
        </a></span></div></div> <div data-v-dad8a512><main class="page"><div class="page-title" style="display:none;"><h1>总结</h1> <div data-v-3b7f5bdf><i class="iconfont reco-account" data-v-3b7f5bdf><span data-v-3b7f5bdf>Leibnize 个人学习笔记</span></i> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default" style="display:none;"><h1 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h1> <p>前端安全的保证主要靠服务端，前端再怎么处理，也只是混淆(手动二哈狗头)，当然这里不是说前端无任何作用，基本的过滤实现、可以减轻大量服务端的工作任务、XSS 的部分攻击，比如发射型，就是前端没做好基本过滤导致的；</p> <h2 id="一、xss"><a href="#一、xss" class="header-anchor">#</a> 一、XSS</h2> <h3 id="_1-1、定义与形式"><a href="#_1-1、定义与形式" class="header-anchor">#</a> 1-1、定义与形式</h3> <p><strong><u><em>XSS(Cross Site Script)跨站脚本攻击</em></u></strong>：即攻击者想方设法向用户页面注入恶意脚本，在浏览器渲染数据时进行攻击；主分三种：</p> <ul><li><strong>存储型</strong>：<u>即攻击脚本被存储在服务端，每当无辜用户请求某页面时，页面携带恶意脚本返回，并随页面渲染而执行攻击；</u></li> <li><strong>反射型</strong>：<u>将攻击脚本混在URL中，服务端接收并将恶意代码当做参数取出、拼接在页面中返回，浏览器解析后即执行恶意代码；</u></li> <li><strong>DOM型</strong>：<u>将攻击脚本写在URL中，诱导用户点击该URL，若 URL 被解析，则攻击脚本就会被运行；此类型攻击不经过服务端；</u></li> <li>注意：过往此种攻击案例是跨域的，故称跨站脚本，但发展至今，是否跨域已不再重要，但名称却保留了下来；</li></ul> <p><strong><u>形式1：评论等输入入口</u></strong></p> <p>通过评论、论坛等用户输入入口，输入非法代码；(在 HTML 中内嵌文本中，恶意内容以 script 标签形成注入)；</p> <p>首先，input 输入：<code>&gt;&lt;script&gt;alert('XSS');&lt;/script&gt;</code>；</p> <ul><li>然后，浏览器请求： <code>http://xxx/search?keyword=&quot;&gt;&lt;script&gt;alert('XSS');&lt;/script&gt;</code>；</li> <li>最后，服务端解析出请求参数 keyword，得到 <code>&gt;&lt;script&gt;alert('XSS');&lt;/script&gt;</code>，拼接并返回，用户访问时受攻击；</li></ul> <p>应对：前端使用HTML转义**<u>控制请求输入，escapeHTML</u>**；</p> <img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200918162415.png" align="" style="zoom:50%;"> <p><strong><u>形式2：参数解析漏洞</u></strong></p> <p>通过 query string 参数解析的漏洞， 插入非法代码(在标签的 href、src 等属性中，包含 JS: 等可执行代码)；</p> <p>原理： JS: 字符、特殊字符若出现在特定位置会引发 XSS 攻击；</p> <p>比如A：</p> <ul><li>首先，input 输入；</li> <li>然后，浏览器请求： <code>http://xxx/?redirect_to=javascript:alert('XSS’)</code>；或 <code>http://xxx/?redirect_to=jAvascRipt:alert('XSS')</code></li> <li>最后，服务端解析成 <code>&lt;a href=&quot;javascript:alert(&amp;#x27;XSS&amp;#x27;)&quot;&gt;跳转...&lt;/a&gt;</code> 并返回，用户点击触发；</li></ul> <p>比如B：</p> <ul><li>首先，input 输入；</li> <li>然后，浏览器请求： <code>http://xxx/?redirect_to=%20javascript:alert('XSS’)</code>；</li> <li>最后，服务端解析成 <code>&lt;a href=&quot; javascript:alert(&amp;#x27;XSS&amp;#x27;)&quot;&gt;跳转...&lt;/a&gt;</code> 并返回，用户点击触发；</li></ul> <p>应对：前端**<u>控制请求输入</u>**，对于链接跳转如 <code>&lt;a href=&quot;xxx&quot;</code> 或 <code>location.href=&quot;xxx&quot;</code>，要检验其内容并禁止以 &quot;javascript:&quot; 开头链接和非法 scheme；</p> <img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200918162416.png" align="" style="zoom:50%;"> <p><strong><u>形式3：内联 JSON 漏洞</u></strong></p> <p>首先，插入 JSON 的地方不能使用 <code>escapeHTML()</code>，因转义 &quot; 后，JSON 格式会被破坏；</p> <p>然后，当 JSON 中包含 U+2028 或 U+2029 这两个字符时，不能作为 JS 的字面量使用，否则会抛出语法错误；</p> <p>然后，当 JSON 中包含字符串 <code>&lt;/script&gt;</code> 时，当前 script 标签将会被闭合，后面字符串内容浏览器会按照 HTML 进行解析；</p> <p>最后，通过增加下一个 <code>&lt;script&gt;</code> 标签等方法就可以完成注入；</p> <p>应对：<strong><u>对内联 JSON 进行转义</u></strong>，<code>escapeEmbedJSON()</code> 函数；</p> <img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200918162417.png" align="" style="zoom:50%;"> <h3 id="_1-2、防御方式"><a href="#_1-2、防御方式" class="header-anchor">#</a> 1-2、防御方式</h3> <p><strong><u>不管何种 XSS 攻击，均需被浏览器执行才可发起攻击，故可以此作为防御切入口：</u></strong></p> <p>首先，<strong><u>输入输出检查/转义/过滤(HTML标签、URL-encodeURIComponent)</u></strong>；不能相信任何输入数据；而不管接收什么或发送什么都需进行转义过滤；</p> <ul><li>向服务端发送数据要进行 URL 的 <code>encodeURIComponent</code> 转义与特定标签符转义；而接收服务端返回数据则同理；</li> <li>对于服务端返回的数据，要谨慎选择输出类 API，而应使用 <code>textContent、setAttribute、innerText</code>；</li> <li>避免使用能将字符串作为代码执行的 API，比如 JS 的 <code>eval()、setTimeout()、setInterval()</code>，避免 <code>innerHTML、outerHTML、document.write()</code>，比如 <code>vue 不使用 v-html / dangerouslySetInnerHTML</code>；</li></ul> <p>然后，鉴于 XSS 目标多数是获取用户 Cookie，可设置 <strong><u>Cookie:HttpOnly</u></strong> 字段，使 JS 无法操作 Cookie 值；</p> <p>然后，后端若需要进行 HTML 拼接，则须**<u>选择安全、成熟的转义库</u>** 基础之上，进行更细致的转义策略制定；</p> <p>然后，<strong><u>后端配置 CSP-浏览器内容安全策略(兼容性问题不大)</u></strong>，让服务器决定浏览器可加载的资源白名单，阻止名单以外的资源加载与运行；告诉浏览器哪些外部资源可加载和执行；只需配置规则，如何拦截是由浏览器自实现；具体做法：</p> <ul><li><p>配置 HTTP Header 中的  <code>Content-Security-Policy</code>；</p></li> <li><p>设置 meta 标签 <code>&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;form-action 'self';&quot;&gt;</code></p></li> <li><p>只允许加载本站资源：<code>Content-Security-Policy: default-src ‘self’</code></p></li> <li><p>只允许加载 HTTPS 协议图片：<code>Content-Security-Policy: img-src https://*</code></p></li> <li><p>允许加载任何来源框架：<code>Content-Security-Policy: child-src 'none'</code></p></li></ul> <p>CSP 可实现：</p> <ul><li>禁止加载外域代码，防止复杂的攻击逻辑；</li> <li>禁止内联脚本执行（规则较严格，目前发现 GitHub 使用）</li> <li>禁止外域提交，网站被攻击后，用户的数据不会泄露到外域；</li> <li>禁止未授权的脚本执行（新特性，Google Map 移动版在使用）</li> <li>合理使用上报可及时发现 XSS，利于问题的快速修复；</li></ul> <p>然后，<strong><u>重写 XSS 常用方法</u></strong>；锁死 apply/call(函数劫持，若非本站脚本无法执行…)、document.write(重写方法阻止广告代码注入)，XSSAuditor(Chrome内建防御模块—后端可绕开仅适用于字符编码) 等方法；</p> <p>最后，<strong><u>漏洞检测</u></strong>；使用 XSS 攻击字符串检测 XSS 漏洞(输入框输入)、并使用扫描工具进行 XSS 漏洞检测；<a href="https://github.com/Arachni/arachni" target="_blank" rel="noopener noreferrer">Arachni<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>、<a href="https://github.com/mozilla/http-observatory/" target="_blank" rel="noopener noreferrer">Mozilla HTTP Observatory<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>、<a href="https://github.com/andresriancho/w3af" target="_blank" rel="noopener noreferrer">w3af<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200923225423.png" align="" style="zoom:50%;"> <p>最后的最后，使用成熟的 JS XSS 过滤库，比如：<a href="https://github.com/leizongmin/js-xss" target="_blank" rel="noopener noreferrer">兔展大佬写的<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>|<a href="https://github.com/leizongmin/js-xss/blob/master/README.zh.md" target="_blank" rel="noopener noreferrer">介绍MD<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 极简输入过滤</span>
<span class="token keyword">function</span> <span class="token function">filterXSS</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> str
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/&amp;/g</span><span class="token punctuation">,</span> <span class="token string">'&amp;amp;'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/ /g</span><span class="token punctuation">,</span> <span class="token string">'&amp;nbsp;'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/&lt;/g</span><span class="token punctuation">,</span> <span class="token string">'&amp;lt;'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/&gt;/g</span><span class="token punctuation">,</span> <span class="token string">'&amp;gt;'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/&quot;/g</span><span class="token punctuation">,</span> <span class="token string">'&amp;quot;'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/'/g</span><span class="token punctuation">,</span> <span class="token string">'&amp;#39;'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\r{0,}\n/g</span><span class="token punctuation">,</span> <span class="token string">'&lt;br/&gt;'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="二、csrf"><a href="#二、csrf" class="header-anchor">#</a> 二、CSRF</h2> <h3 id="_2-1、定义与形式"><a href="#_2-1、定义与形式" class="header-anchor">#</a> 2-1、定义与形式</h3> <p><strong><u><em>CSRF攻击(Cross-site request forgery)跨站请求伪造</em></u></strong>：指的是黑客诱导用户点击链接，打开黑客的网站，然后黑客利用用户 <strong><u>目前的登录状态</u></strong> 发起跨站请求；</p> <ul><li><p>比如：攻击者诱导受害者进入第三方网站A，利用受害者在被攻击网站B已获取的注册凭证绕过后台用户验证，由此向被攻击网站B发起跨站请求，以达到冒充用户、对被攻击网站B执行非法操作的目的；</p></li> <li><p>通俗：黑客引诱用户打开黑客的网站，利用用户的登陆状态发起跨站请求)；</p></li></ul> <p><strong><u>CSRF 与 XSS 攻击差别：</u></strong></p> <p>XSS 需注入恶意代码以实施攻击；</p> <ul><li>CSRF 无需将恶意代码注入用户页面，仅利用服务器漏洞和用户登录状态来实施攻击；</li></ul> <p>XSS 是获取信息，无需提前获知其他用户页面的代码和数据包；</p> <ul><li>CSRF 是代替用户完成指定的动作，需要获知其他用户页面的代码和数据包；</li></ul> <p>XSS 是用户过分相信网站、认为服务器返回内容总是正确、将攻击者的输入当代码执行；</p> <ul><li>CSRF 是网站过分相信用户、认为发起请求总是真实用户；</li></ul> <p>CSRF 攻击方式更加多样， 只要可以发起请求就能实施相应的攻击；</p> <p>CSRF 发生在第三方域名，而非被攻击网，被攻击网站无法阻止攻击这一行为的发生；</p> <p>CSRF 攻击成本比 XSS 低，因用户每天都要访问大量网页，且无法确认每一网页安全性；</p> <p>CSRF 是由 XSS 实现的，CSRF 也可称为 XSRF；但其本质，XSS 是代码注入问题，CSRF 是 HTTP 问题；</p> <p>CSRF 攻击利用受害者在被攻击网的登录凭证，冒充受害者提交操作；而非直接窃取数据，只是使用数据；</p> <p>CSRF 通常是跨域操作，因外域更容易被攻击者所控制，但若本域下有容易被利用的功能，比如可发图和链接的论坛，则可直接在本域进行且此类型更危险；</p> <p>CSRF 攻击无需将恶意代码注入用户当前页面中，而是跳转新页面，利用服务器 <strong><u>验证漏洞</u></strong> 和 <strong><u>用户先前登录状态</u></strong> 来模拟用户行为；</p> <p><strong><u>CSRF 攻击形式：</u></strong></p> <p>GET 类型的 CSRF：自动发送 GET 请求，比如：</p> <ul><li><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://xxx.com/info?user=hhh&amp;count=100<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>此时，请求会自动携带此网站的 Cookie 信息，若服务端无相应验证，就会允许操作；</p></li></ul> <p>POST 类型的 CSRF：自动发送 POST 请求，提交表单，比如：</p> <ul><li><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>hacker-form<span class="token punctuation">'</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://xxx.com/info<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POST<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hhh<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'hacker-form'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <p>链接类型的 CSRF：诱导点击发送 GET 请求：</p> <ul><li><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://xxx/info?user=hhh&amp;count=100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">taget</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_blank<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点击进入修仙世界<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h3 id="_2-2、防御方式"><a href="#_2-2、防御方式" class="header-anchor">#</a> 2-2、防御方式</h3> <ul><li>CSRF自动防御策略：同源检测 (Origin 和 Referer 验证)(请求头易伪造)；</li> <li>CSRF主动防御措施：Token 验证 或者 双重 Cookie 验证 以及配合 Samesite Cookie(兼容性)；</li> <li>保证页面的幂等性，后端接口不要在 GET 页面中做用户操作；</li></ul> <p><strong><u>CSRF &quot;通常&quot;发生在三方域名 ====&gt; 阻止不明外域的访问：同源检测(Origin、Referer)、Samesite Cookie 等；</u></strong></p> <p><strong><u>CSRF 攻击者只能使用而不能获取 Cookie 等信息 ====&gt; 提交时要求附加本域才能获取的信息：CSRF Token、双重Cookie验证；</u></strong></p> <p>其他：服务端应防止被黑客利用，成为攻击源头：</p> <ul><li>严格管理所有的上传接口，防止任何预期之外的上传内容 (比如 HTML)；</li> <li>添加 <code>Header X-Content-Type-Options: nosniff</code> 防止黑客上传 HTML 内容的资源(比如图片)被解析为网页；</li> <li>对于用户上传的图片，进行转存或校验，不直接使用用户填写的图片链接；</li> <li>当前用户打开其他用户填写的链接时需告知风险 (这也是很多论坛不允许直接在内容中发布外链的原因之一，不全是为用户留存度，更有安全考虑)；</li></ul> <p>其他：客户端应提升防护能力：</p> <ul><li>避免打开可疑链接，非要打开时，先清空本地记录和 cookie 信息或使用不常用的浏览器，比如IE；</li> <li>使用网页版浏览邮件或新闻也会带来额外风险，因查看邮件或者新闻消息有可能导致恶意代码攻击；</li></ul> <p><strong><u>阻止不明外域访问：</u></strong></p> <p><strong><u>同源检测</u></strong>：服务端通过验证请求头的 <strong><u>Referer(记录请求来源地址)、Origin(记录请求域名) 字段来验证来源站点</u></strong>，但两者请求头很容易伪造(通过 Ajax 中自定义请求头)、本域发起的 CSRF 攻击无法防御、HTTPS 页面跳转到 HTTP 页面所有浏览器 Referer 都丢失；总结：同源验证是相对简单的防范方法，能够防范绝大多数的CSRF  攻击，但不适用于对于安全性要求较高，或有较多用户输入内容情况(问题多多)；</p> <p><strong><u>设置 Cookie SameSite</u></strong>：Google起草了一份草案来改进HTTP协议；让 Cookie 不随跨站请求发出 (<strong><u>Strict</u></strong>—完全禁止三方携带，<strong><u>Lax</u></strong>—GET方式表单或a标签GET请求、<strong><u>None</u></strong>—默认模式)；缺点明显：严格模式下，跳转子域名或新标签重新打开、刚登陆的网站，之前的 Cookie 都将不复存在，影响用户体验；<strong>无论何种模式，均不支持子域</strong>：比如：种在子域 topic.a.com下的 Cookie，并不能使用其主域下种植的 SamesiteCookie，当网站有多个子域名时，不能使用 SamesiteCookie 在主域名存储用户登录信息；<strong>总结：可替代同源验证的方案，但目前尚未成熟，其应用场景有待观望；</strong></p> <p><strong><u>请求须附加本域信息</u></strong>：</p> <p><strong><u>验证 Token</u></strong>：</p> <p>既然 CSRF 攻击多利用浏览器的自携带 Cookie 发起请求的这一特性，则让其不能自携带的内容即可；遂使用 Token；用户请求服务器时，服务器返回一个 token，后续每个请求均需同时携带 token 和 cookie 才会被认为是合法请求；使用(详细)：</p> <ul><li><p>首先，将 CSRF Token 输出到页面中；</p> <ul><li>注意：用户打开页面时，服务器为其生成通过加密算法加密的 Token，然后将 Token 保存在 Session 中，并在页面所有 a 和 form 标签中加入；</li> <li>注意：上述方法适用于服务器返回前端展示的静态页面，若页面加载后动态生成的 HTML，则需前端手动加入 Token；</li></ul></li> <li><p>然后，页面发送请求携带这个Token；</p> <ul><li>注意：对于 GET 请求，Token 附在请求地址后，比如：<code>http://url?csrftoken=tokenvalue</code></li> <li>注意：对于 POST 请求，则在 form 上加入，比如：<code>&lt;input type=&quot;hidden&quot; name=&quot;csrftoken&quot; value=&quot;tokenvalue&quot;/&gt;</code></li></ul></li> <li><p>最后，服务器验证 Token  是否正确；</p> <ul><li>注意：判断过程需先解密，然后对比加密字符串和时间戳，校验通过即可；</li> <li>注意：若在请求中找不到 Token，或提供值与会话中值不匹配，则应 中止请求，并重置 Token、并将事件记录为正在进行的潜在CSRF攻击；</li></ul></li></ul> <p>问题1-1：大型网站中使用 Session 存储 CSRF Token 给服务器带来负担，且 Session 机制会在分布式环境下失效；</p> <p>解决1-1：分布式集群， 在 Redis 存储 CSRF Token；</p> <p>问题1-2：使用 Session 存储、读取和验证 CSRF Token 会产生较大的复杂度和性能问题；</p> <p>解决1-2：采用 Encrypted Token Pattern 方式，此方式中的 Token 是一计算结果(使用 UserID、时间戳、随机数加密生成)，而非随机字符串，故校验时无需再去读取存储 Token，只需再次计算即可，保证分布式服务下 Token 一致性，又保证不易被破解；计算通过后，再去校验时间戳并做其他校验处理；</p> <p>总结：只要页面没有 XSS 漏洞，泄露 Token，则接口的 CSRF 攻击就无法成功；缺点是实现较复杂，后端需给每个页面写入 Token，或前端每个Form/Ajax 请求都携带 Token，而后端则需对每一个接口都进行校验，并保证页面 Token 及请求 Token 一致；工作量较大(鸡蛋里挑骨头)；</p> <p><strong><u>双重Cookie</u></strong>：原理和 Token 相似，在请求接口时，在请求参数中附带上对应的 cookie，服务端在接收到请求时对参数中的 cookie 和 cookie 中的值进行对比判断是否为攻击请求；</p> <p><u><strong>Anti CSRF Token</strong></u>：防御 CSRF 公认最合适方案、token 存放用户页面表单和 Session/Cookie 中，提交请求时，服务端验证两者是否一致；感觉类似 CSRF token；只是存放位置不同；前者分开存放，这里合并存放；</p> <ul><li><strong><u>其他方式：短信认证</u></strong></li></ul> <p><strong><u>漏洞检查</u></strong>：</p> <ul><li>是否有验证码、是否判断 Referer、目标表单是否带有 Token 验证；</li> <li>Allow-access 相关参数设置是否有漏洞、目标 jsonp 数据是否可以自定义 callback、CSRF Tester；</li></ul> <h2 id="三、劫持"><a href="#三、劫持" class="header-anchor">#</a> 三、劫持</h2> <p>劫持一般会发生在报文传输时的内容改造，常见为 <strong><u>界面劫持</u></strong>，即透明的 iframe 或 图片，点击目的地与最终目的地不符；预防策略：</p> <ul><li>服务端添加 X-Frame-Options 响应头，如此浏览器就会阻止嵌入网页的渲染；</li> <li>利用 JS 判断顶层视口的域名是否与本页域名一致，不一致则不允许操作
<ul><li><code>top.location.hostname === self.location.hostname</code>；</li></ul></li> <li>利用 JS 完成渲染后，修改所有 ifame 属性值，添加 csp、referrerpolicy、sandbox 属性，限制 iframe 行为；</li></ul> <img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200918162426.png" align="" style="zoom:50%;"> <ul><li>敏感操作使用更复杂的步骤（验证码、输入项目名称以删除—Github)</li> <li>全链路 HTTPS；</li></ul> <p>其他形式的还有：DNS劫持(错误导向)、CDN 劫持(劫持 CDN 并污染其中资源)</p> <ul><li>DNS劫持(涉嫌违法)：输入京东被强制跳转到淘宝就属于 DNS劫持。
<ul><li>DNS强制解析：通过修改运营商本地 DNS 记录，来引导用户流量到缓存服务器；</li> <li>302 跳转：通过监控网络出口的流量，分析判断哪些内容是可以进行劫持处理，在对劫持的内存发起 302 跳转的回复，引导用户获取内容。</li></ul></li> <li>HTTP劫持(HTTPS杜绝)：例如访问百度，但是一直有贪玩蓝月的广告。由于 HTTP 是明文传输，运营商会修改你的 HTTP 响应内容（即加广告）。</li></ul> <h2 id="四、错误监控与上报"><a href="#四、错误监控与上报" class="header-anchor">#</a> 四、错误监控与上报</h2> <h3 id="_4-1、错误分类与捕获"><a href="#_4-1、错误分类与捕获" class="header-anchor">#</a> 4-1、错误分类与捕获</h3> <ul><li>即时运行错误：代码错误
<ul><li>try...catch</li> <li>window.onerror 或者 window.addEventListener(捕获阶段非冒泡阶段)</li></ul></li> <li>资源加载错误
<ul><li>object.onerror：img.onerror</li> <li>performance.getEntries(getEntries api 返回一个资源加载完成数组)</li> <li>Error 事件捕获</li></ul></li> <li>跨域问题
<ul><li>后端配置，开发时即可避免</li></ul></li></ul> <h3 id="_4-2、错误上报"><a href="#_4-2、错误上报" class="header-anchor">#</a> 4-2、错误上报</h3> <ul><li>ajax</li> <li>image 的 src 上报，<code>(new Image()).src = '错误上报请求地址'</code> <ul><li>目前主流方式，通过采用 image 对象+错误信息的方式上报错误；</li> <li>因图片发送 get 请求，浏览器对图片有缓存，同样的请求，图片只会发送一次，避免重复上报；</li></ul></li></ul></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">最后更新: </span> <span class="time">10/12/2020, 5:14:41 PM</span></div></footer> <!----> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.58d463af.js" defer></script><script src="/assets/js/3.5b6bd7ce.js" defer></script><script src="/assets/js/1.53e5735b.js" defer></script><script src="/assets/js/121.5983ebbd.js" defer></script>
  </body>
</html>
