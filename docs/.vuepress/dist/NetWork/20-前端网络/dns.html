<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>一、基本 | Leibnize 个人学习笔记</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="素材整理自网络，仅供个人学习记录之用">
    <link rel="preload" href="/assets/css/0.styles.4c1fe16c.css" as="style"><link rel="preload" href="/assets/js/app.58d463af.js" as="script"><link rel="preload" href="/assets/js/3.5b6bd7ce.js" as="script"><link rel="preload" href="/assets/js/1.53e5735b.js" as="script"><link rel="preload" href="/assets/js/198.530f7c9c.js" as="script"><link rel="prefetch" href="/assets/js/10.47a34be1.js"><link rel="prefetch" href="/assets/js/100.2f7c82fb.js"><link rel="prefetch" href="/assets/js/101.57a81617.js"><link rel="prefetch" href="/assets/js/102.8befc7fd.js"><link rel="prefetch" href="/assets/js/103.c690f409.js"><link rel="prefetch" href="/assets/js/104.c8b86b63.js"><link rel="prefetch" href="/assets/js/105.9bac0b69.js"><link rel="prefetch" href="/assets/js/106.77dcd9f8.js"><link rel="prefetch" href="/assets/js/107.305a0cd6.js"><link rel="prefetch" href="/assets/js/108.197f379c.js"><link rel="prefetch" href="/assets/js/109.ed1f6dd8.js"><link rel="prefetch" href="/assets/js/11.d67029e2.js"><link rel="prefetch" href="/assets/js/110.b10adffc.js"><link rel="prefetch" href="/assets/js/111.27cb5e44.js"><link rel="prefetch" href="/assets/js/112.598f5429.js"><link rel="prefetch" href="/assets/js/113.b7f9fe99.js"><link rel="prefetch" href="/assets/js/114.cb9df12d.js"><link rel="prefetch" href="/assets/js/115.4d812f2c.js"><link rel="prefetch" href="/assets/js/116.3a4f5195.js"><link rel="prefetch" href="/assets/js/117.be29161e.js"><link rel="prefetch" href="/assets/js/118.eb6b99b9.js"><link rel="prefetch" href="/assets/js/119.b3f342d7.js"><link rel="prefetch" href="/assets/js/12.f13f81de.js"><link rel="prefetch" href="/assets/js/120.f343ff14.js"><link rel="prefetch" href="/assets/js/121.5983ebbd.js"><link rel="prefetch" href="/assets/js/122.8dd46465.js"><link rel="prefetch" href="/assets/js/123.71ffc4a2.js"><link rel="prefetch" href="/assets/js/124.4e568dbe.js"><link rel="prefetch" href="/assets/js/125.43b22375.js"><link rel="prefetch" href="/assets/js/126.6522a7eb.js"><link rel="prefetch" href="/assets/js/127.8308b909.js"><link rel="prefetch" href="/assets/js/128.1fd06c87.js"><link rel="prefetch" href="/assets/js/129.91e28eff.js"><link rel="prefetch" href="/assets/js/13.ac76083d.js"><link rel="prefetch" href="/assets/js/130.5027f9f0.js"><link rel="prefetch" href="/assets/js/131.4554c2f2.js"><link rel="prefetch" href="/assets/js/132.c643aed4.js"><link rel="prefetch" href="/assets/js/133.5e499634.js"><link rel="prefetch" href="/assets/js/134.59b1b330.js"><link rel="prefetch" href="/assets/js/135.da46fa8a.js"><link rel="prefetch" href="/assets/js/136.3a67d738.js"><link rel="prefetch" href="/assets/js/137.4d5f5f5e.js"><link rel="prefetch" href="/assets/js/138.1fe93dba.js"><link rel="prefetch" href="/assets/js/139.d7f54242.js"><link rel="prefetch" href="/assets/js/14.8e5c3120.js"><link rel="prefetch" href="/assets/js/140.82be0f82.js"><link rel="prefetch" href="/assets/js/141.979c5a91.js"><link rel="prefetch" href="/assets/js/142.658ae82d.js"><link rel="prefetch" href="/assets/js/143.17532399.js"><link rel="prefetch" href="/assets/js/144.dc947607.js"><link rel="prefetch" href="/assets/js/145.fc89bd8c.js"><link rel="prefetch" href="/assets/js/146.a5e1b7eb.js"><link rel="prefetch" href="/assets/js/147.0f8384fc.js"><link rel="prefetch" href="/assets/js/148.fccbb459.js"><link rel="prefetch" href="/assets/js/149.d2d32bbc.js"><link rel="prefetch" href="/assets/js/15.e17af96c.js"><link rel="prefetch" href="/assets/js/150.73f88a17.js"><link rel="prefetch" href="/assets/js/151.dd85d521.js"><link rel="prefetch" href="/assets/js/152.ca632725.js"><link rel="prefetch" href="/assets/js/153.02b859a6.js"><link rel="prefetch" href="/assets/js/154.268e5dd0.js"><link rel="prefetch" href="/assets/js/155.0df9a80c.js"><link rel="prefetch" href="/assets/js/156.0e786e96.js"><link rel="prefetch" href="/assets/js/157.79cdcd86.js"><link rel="prefetch" href="/assets/js/158.8a131380.js"><link rel="prefetch" href="/assets/js/159.7aed0b17.js"><link rel="prefetch" href="/assets/js/16.472bfca7.js"><link rel="prefetch" href="/assets/js/160.31daa77a.js"><link rel="prefetch" href="/assets/js/161.a44e6bf4.js"><link rel="prefetch" href="/assets/js/162.86180287.js"><link rel="prefetch" href="/assets/js/163.c9fd632a.js"><link rel="prefetch" href="/assets/js/164.15e04e68.js"><link rel="prefetch" href="/assets/js/165.69bcb02b.js"><link rel="prefetch" href="/assets/js/166.084ab8e2.js"><link rel="prefetch" href="/assets/js/167.0f42977a.js"><link rel="prefetch" href="/assets/js/168.a4474b7b.js"><link rel="prefetch" href="/assets/js/169.3d05b3ba.js"><link rel="prefetch" href="/assets/js/17.f9d21c6e.js"><link rel="prefetch" href="/assets/js/170.484ffe30.js"><link rel="prefetch" href="/assets/js/171.01628965.js"><link rel="prefetch" href="/assets/js/172.2dc6c763.js"><link rel="prefetch" href="/assets/js/173.4fa13f79.js"><link rel="prefetch" href="/assets/js/174.5da03623.js"><link rel="prefetch" href="/assets/js/175.7c3cae2a.js"><link rel="prefetch" href="/assets/js/176.3df0d63b.js"><link rel="prefetch" href="/assets/js/177.3aa8d705.js"><link rel="prefetch" href="/assets/js/178.5b48450e.js"><link rel="prefetch" href="/assets/js/179.3a963dce.js"><link rel="prefetch" href="/assets/js/18.8314222e.js"><link rel="prefetch" href="/assets/js/180.d67c14c9.js"><link rel="prefetch" href="/assets/js/181.c7bf4046.js"><link rel="prefetch" href="/assets/js/182.4a4705fd.js"><link rel="prefetch" href="/assets/js/183.9183a7da.js"><link rel="prefetch" href="/assets/js/184.290760c3.js"><link rel="prefetch" href="/assets/js/185.64cd4609.js"><link rel="prefetch" href="/assets/js/186.2940410e.js"><link rel="prefetch" href="/assets/js/187.12b14c61.js"><link rel="prefetch" href="/assets/js/188.1fea2b8b.js"><link rel="prefetch" href="/assets/js/189.04b7d343.js"><link rel="prefetch" href="/assets/js/19.ed77427b.js"><link rel="prefetch" href="/assets/js/190.a7d6ec94.js"><link rel="prefetch" href="/assets/js/191.8ad7d925.js"><link rel="prefetch" href="/assets/js/192.2fd0c8f8.js"><link rel="prefetch" href="/assets/js/193.4f8a87cd.js"><link rel="prefetch" href="/assets/js/194.9e2e73ca.js"><link rel="prefetch" href="/assets/js/195.c6292340.js"><link rel="prefetch" href="/assets/js/196.b7ff135e.js"><link rel="prefetch" href="/assets/js/197.83a7d260.js"><link rel="prefetch" href="/assets/js/199.c5048869.js"><link rel="prefetch" href="/assets/js/20.09503993.js"><link rel="prefetch" href="/assets/js/200.3435c341.js"><link rel="prefetch" href="/assets/js/201.1e492eea.js"><link rel="prefetch" href="/assets/js/202.f7b55746.js"><link rel="prefetch" href="/assets/js/203.08e404b6.js"><link rel="prefetch" href="/assets/js/204.1bc4bdd8.js"><link rel="prefetch" href="/assets/js/21.38c15b75.js"><link rel="prefetch" href="/assets/js/22.ae59de53.js"><link rel="prefetch" href="/assets/js/23.1c6d3160.js"><link rel="prefetch" href="/assets/js/24.28c7c43e.js"><link rel="prefetch" href="/assets/js/25.e53d1234.js"><link rel="prefetch" href="/assets/js/26.6fe14a49.js"><link rel="prefetch" href="/assets/js/27.910bdd9c.js"><link rel="prefetch" href="/assets/js/28.9d9cd019.js"><link rel="prefetch" href="/assets/js/29.525906aa.js"><link rel="prefetch" href="/assets/js/30.8a1a47c0.js"><link rel="prefetch" href="/assets/js/31.750a297b.js"><link rel="prefetch" href="/assets/js/32.290c8619.js"><link rel="prefetch" href="/assets/js/33.885855c1.js"><link rel="prefetch" href="/assets/js/34.fb5b3f84.js"><link rel="prefetch" href="/assets/js/35.22021291.js"><link rel="prefetch" href="/assets/js/36.6736dcbf.js"><link rel="prefetch" href="/assets/js/37.50fc071e.js"><link rel="prefetch" href="/assets/js/38.a6f00886.js"><link rel="prefetch" href="/assets/js/39.e5f0c600.js"><link rel="prefetch" href="/assets/js/4.4c62e10b.js"><link rel="prefetch" href="/assets/js/40.7eaf6de1.js"><link rel="prefetch" href="/assets/js/41.c55fd828.js"><link rel="prefetch" href="/assets/js/42.2c5aaafc.js"><link rel="prefetch" href="/assets/js/43.6c939d74.js"><link rel="prefetch" href="/assets/js/44.22ccc866.js"><link rel="prefetch" href="/assets/js/45.56a056b8.js"><link rel="prefetch" href="/assets/js/46.6901927f.js"><link rel="prefetch" href="/assets/js/47.78460423.js"><link rel="prefetch" href="/assets/js/48.12fddaae.js"><link rel="prefetch" href="/assets/js/49.55f5515e.js"><link rel="prefetch" href="/assets/js/5.97a7c0dc.js"><link rel="prefetch" href="/assets/js/50.5c665644.js"><link rel="prefetch" href="/assets/js/51.9fbd3941.js"><link rel="prefetch" href="/assets/js/52.f3a93332.js"><link rel="prefetch" href="/assets/js/53.f7c91d71.js"><link rel="prefetch" href="/assets/js/54.035bd227.js"><link rel="prefetch" href="/assets/js/55.9d4300de.js"><link rel="prefetch" href="/assets/js/56.1fa21a7d.js"><link rel="prefetch" href="/assets/js/57.c6af5e20.js"><link rel="prefetch" href="/assets/js/58.8c0baaa7.js"><link rel="prefetch" href="/assets/js/59.63f1befc.js"><link rel="prefetch" href="/assets/js/6.8e992509.js"><link rel="prefetch" href="/assets/js/60.35539f20.js"><link rel="prefetch" href="/assets/js/61.0872b63b.js"><link rel="prefetch" href="/assets/js/62.6749d184.js"><link rel="prefetch" href="/assets/js/63.0a8a07d3.js"><link rel="prefetch" href="/assets/js/64.a2eeb6f7.js"><link rel="prefetch" href="/assets/js/65.d78ecb46.js"><link rel="prefetch" href="/assets/js/66.1e1a87a2.js"><link rel="prefetch" href="/assets/js/67.b550d647.js"><link rel="prefetch" href="/assets/js/68.68258f2e.js"><link rel="prefetch" href="/assets/js/69.9f502a69.js"><link rel="prefetch" href="/assets/js/7.159745e4.js"><link rel="prefetch" href="/assets/js/70.c9b2fe76.js"><link rel="prefetch" href="/assets/js/71.b7b04483.js"><link rel="prefetch" href="/assets/js/72.edb7dfe5.js"><link rel="prefetch" href="/assets/js/73.869de1e4.js"><link rel="prefetch" href="/assets/js/74.7816f275.js"><link rel="prefetch" href="/assets/js/75.0457b07c.js"><link rel="prefetch" href="/assets/js/76.79a2eaee.js"><link rel="prefetch" href="/assets/js/77.66cfa995.js"><link rel="prefetch" href="/assets/js/78.9dd75caf.js"><link rel="prefetch" href="/assets/js/79.f6111e69.js"><link rel="prefetch" href="/assets/js/8.b79c23ae.js"><link rel="prefetch" href="/assets/js/80.fff0a469.js"><link rel="prefetch" href="/assets/js/81.42c5ebec.js"><link rel="prefetch" href="/assets/js/82.ca2f7f18.js"><link rel="prefetch" href="/assets/js/83.ed547319.js"><link rel="prefetch" href="/assets/js/84.377155d9.js"><link rel="prefetch" href="/assets/js/85.e5aab871.js"><link rel="prefetch" href="/assets/js/86.14705636.js"><link rel="prefetch" href="/assets/js/87.502cb8e9.js"><link rel="prefetch" href="/assets/js/88.d8f271ec.js"><link rel="prefetch" href="/assets/js/89.3e9deca1.js"><link rel="prefetch" href="/assets/js/9.23c0899b.js"><link rel="prefetch" href="/assets/js/90.4de4929c.js"><link rel="prefetch" href="/assets/js/91.307ce9fd.js"><link rel="prefetch" href="/assets/js/92.47e69683.js"><link rel="prefetch" href="/assets/js/93.34abda4c.js"><link rel="prefetch" href="/assets/js/94.00078270.js"><link rel="prefetch" href="/assets/js/95.4c9ca2ce.js"><link rel="prefetch" href="/assets/js/96.9121392c.js"><link rel="prefetch" href="/assets/js/97.41f6bdb8.js"><link rel="prefetch" href="/assets/js/98.4524a102.js"><link rel="prefetch" href="/assets/js/99.7d313788.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4c1fe16c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-dad8a512><div data-v-dad8a512><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-dad8a512 data-v-dad8a512><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-dad8a512 data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>Leibnize 个人学习笔记</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>Leibnize 个人学习笔记</span>
            
          <!---->
          2020
        </a></span></div></div> <div class="hide" data-v-dad8a512><header class="navbar" data-v-dad8a512><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Leibnize 个人学习笔记</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Basics/" class="nav-link"><i class="iconfont undefined"></i>
  基本
</a></div><div class="nav-item"><a href="/NetWork/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  网络
</a></div><div class="nav-item"><a href="https://github.com/rjwx60" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-dad8a512></div> <aside class="sidebar" data-v-dad8a512><div class="personal-info-wrapper" data-v-ca798c94 data-v-dad8a512><!----> <h3 class="name" data-v-ca798c94>
    Leibnize 个人学习笔记
  </h3> <div class="num" data-v-ca798c94><div data-v-ca798c94><h3 data-v-ca798c94>0</h3> <h6 data-v-ca798c94>Article</h6></div> <div data-v-ca798c94><h3 data-v-ca798c94>0</h3> <h6 data-v-ca798c94>Tag</h6></div></div> <hr data-v-ca798c94></div> <nav class="nav-links"><div class="nav-item"><a href="/Basics/" class="nav-link"><i class="iconfont undefined"></i>
  基本
</a></div><div class="nav-item"><a href="/NetWork/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  网络
</a></div><div class="nav-item"><a href="https://github.com/rjwx60" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>网络专题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/NetWork/20-前端网络" class="sidebar-heading clickable open"><span>20-前端网络</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/NetWork/20-前端网络/base.html" class="sidebar-link">一、基本</a></li><li><a href="/NetWork/20-前端网络/ip.html" class="sidebar-link">二、IP</a></li><li><a href="/NetWork/20-前端网络/tcp.html" class="sidebar-link">三、TCP</a></li><li><a href="/NetWork/20-前端网络/dns.html" class="active sidebar-link">四、DNS</a></li><li><a href="/NetWork/20-前端网络/http.html" class="sidebar-link">五、HTTP</a></li><li><a href="/NetWork/20-前端网络/websocket.html" class="sidebar-link">六、Websocket</a></li><li><a href="/NetWork/20-前端网络/Summary.html" class="sidebar-link">七、Summary</a></li></ul></section></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e></h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>Leibnize 个人学习笔记</span>
            
          <!---->
          2020
        </a></span></div></div> <div data-v-dad8a512><main class="page"><div class="page-title" style="display:none;"><h1>一、基本</h1> <div data-v-3b7f5bdf><i class="iconfont reco-account" data-v-3b7f5bdf><span data-v-3b7f5bdf>Leibnize 个人学习笔记</span></i> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default" style="display:none;"><h1 id="一、基本"><a href="#一、基本" class="header-anchor">#</a> 一、基本</h1> <h2 id="_1-1、基本"><a href="#_1-1、基本" class="header-anchor">#</a> 1-1、基本</h2> <p>DNS (Domain Name System)，是一种组织成：域层次结构的计算机和网络服务命名系统，<u>提供将主机名和域名转换为IP地址的服务</u>，是将人类可读域名与服务器 IP 进行映射的数据库，使用户更为方便访问网络；</p> <p>DNS 运行在 UDP 协议之上，使用端口 53；(网络通讯大部分基于 TCP/IP，虽 IP 不方便记忆，但机器不认域名)</p> <p>DNS 是互联网中的重要基础设施，为保证高可用、高并发和分布式，它设计成了树状的层次结构；</p> <p>DNS 由<u>根DNS服务器、顶级域 DNS 服务器、权威 DNS 服务器</u> 组成；解析顺序是：</p> <p>首先从 <u>浏览器缓存</u>、<u>操作系统缓存</u> 及 <u>本地 DNS 缓存 (/etc/hosts)</u> 逐级查找，然后从 <u>本地 DNS 服务器</u>、<u>根 DNS</u>、<u>顶级 DNS</u> 及 <u>权威 DNS</u> 层层递归查询；还可基于域名在内网、外网进行负载均衡；</p> <p>传统 DNS 有很多问题(解析慢、更新不及时)，但是 <u>HTTP DNS</u> 通过客户端 SDK 和服务端配合，直接通过 HTTP 调用解析 DNS 的方式，从而绕过传统 DNS 缺点，实现智能调度；</p> <h2 id="_1-2、域名结构"><a href="#_1-2、域名结构" class="header-anchor">#</a> 1-2、域名结构</h2> <img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200907234809.png" style="zoom:50%;"> <img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200907234830.png" style="zoom:50%;"> <h3 id="_1-2-1、根子结构"><a href="#_1-2-1、根子结构" class="header-anchor">#</a> 1-2-1、根子结构</h3> <p>DNS服务器一般分三种，根DNS服务器，顶级DNS服务器，权威DNS服务器；</p> <p><strong><u>根域</u> <strong>名服务器，只保存下一级域名( <strong><u>顶级域</u></strong> 名服务器，保存下级域名服务器 IP)，比如 com、net、org 等，此外还有国家域名 jp、cn 等，而 <a href="https://www.zhihu.com/question/22587247/answer/66417484" target="_blank" rel="noopener noreferrer">全球只有13台<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 根服务器；而顶级域名服务器则保存更下级的域名服务器 IP(</strong><u>第二层域</u></strong> 名服务器)，第二层域下含有 <strong><u>子域</u></strong> 名服务器；</p> <ul><li>根 DNS 服务器 ：返回顶级域 DNS 服务器的 IP 地址；</li> <li>顶级域 DNS 服务器：返回权威 DNS 服务器的 IP 地址；</li> <li>权威 DNS 服务器 ：返回相应主机的 IP 地址；</li></ul> <h3 id="_1-2-2、分布式"><a href="#_1-2-2、分布式" class="header-anchor">#</a> 1-2-2、分布式</h3> <p>DNS 使用分布式的层次数据库模式缓存方法，来解决单点集中式的问题：</p> <ul><li>故障影响大(因特网规模持续增长，集中式设计一旦发生故障，全球通讯失败)</li> <li>通信容量(上亿台主机发送查询DNS报文请求，包括但不限于 HTTP请求，电子邮件报文、TCP长连接服务)</li> <li>远距离的时间延迟；</li> <li>维护开销大(因所有主机名的 IP 映射都要在同一服务站点更新)</li></ul> <h2 id="_1-3、查询工具-dig"><a href="#_1-3、查询工具-dig" class="header-anchor">#</a> 1-3、查询工具 Dig</h2> <img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200907234831.png" align="" style="zoom:50%;"> <p>注意：资源记录：DNS 数据库中包含的 <strong><u>资源记录 (RR)</u></strong>，每个 RR 标识数据库中的特定资源；</p> <ul><li>在建立 DNS 服务器时，常用到 SOA、NS、A 记录；</li> <li>在维护 DNS 服务器时，则用到 MX、CNAME 记录</li></ul> <img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200907234832.png" align="" style="zoom:50%;"> <h2 id="_1-4、dns-解析流程"><a href="#_1-4、dns-解析流程" class="header-anchor">#</a> 1-4、DNS 解析流程</h2> <p><a href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2003/cc775637(v=ws.10)?redirectedfrom=MSDN" target="_blank" rel="noopener noreferrer">How DNS query works<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>1、首先：浏览器中输入域名 <code>www.baidu.com</code> ，然后浏览器搜索  <strong><u>自身 DNS 缓存</u></strong> (时效1min可存1000条，可通过地址栏输入 <code>chrome://net-internals/#dns</code> 查看)，若无则该请求会传递到 DNS 客户端服务，以使用计算机本地缓存的信息进行解析， <strong><u>本地解析器缓存</u></strong> 可从2个可能的来源获得名称信息：(查看本机 DNS 缓存方式详看：<a href="https://stackoverflow.com/questions/38867905/how-to-view-dns-cache-in-osx" target="_blank" rel="noopener noreferrer">stackoverflow<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> )</p> <ul><li>若在本地配置 Hosts 文件，则在启动 DNS 客户端服务时，该文件中所有的主机到地址的映射均会预加载到缓存中；</li> <li>从以前的 DNS 查询的答复中获得的资源记录将添加到缓存中并保留一段时间；</li></ul> <p>2、然后，若查询与缓存中的条目不匹配，则解析过程将继续进行，客户端将向 <strong><u>本地配置的首选DNS 服务器</u></strong> 发起 <u><em>递归</em></u> 的域名解析请求，当运营商 DNS 服务器收到查询时，首先根据服务器本地配置区域中包含的资源记录信息，检查是否可权威地回答查询，若查询名称与本地区域信息中相应资源记录相匹配，则以此来解析查询名称以进行权威应答；若查询名称不存在于当前区域，则使用先前查询的本地缓存结果 (<strong><u>本地DNS服务器已缓存的映射关系</u></strong>) 进行检查，若匹配且未过期，则表示查询成功 (但此结果不具有权威性)；</p> <ul><li><p>注意：本地配置的首选DNS 服务器，一般是电信运营商提供的，也可是 Google 提供的 DNS 服务器；</p></li> <li><p>注意：浏览器发起 DNS 的系统调用，在很多基于UNIX的机器上，应用程序需调用函数 <code>gethostbyname()</code> ，用户主机的DNS客户端接收到后，便向网络中发送 DNS 查询报文；</p></li> <li><p>注意：查询其他DNS服务器使用递归查询，而为了使 DNS 服务器正确进行递归，需要一些有关 DNS 域名称空间中其他 DNS 服务器的有用的联系信息。此信息以 <em><strong>根提示 root hints</strong></em> 的形式提供(若下图)，***根提示***是可以由  DNS 服务用来查找对 DNS 域名称空间树的根具有权威性的其他 DNS 服务器的初步资源记录的列表；通过 <em><strong>根提示</strong></em> 查找根服务器，DNS 服务器可完成递归使用；</p></li></ul> <p>3、然后，若查询不得，则过程继续，DNS 服务器为用户发起 DNS 解析<u><em>迭代</em></u> 请求；</p> <img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200907234833.png" style="zoom:50%;"> <ul><li>注意：DNS的域名查找，在客户端和浏览器，本地DNS之间的查询方式是递归查询；在本地DNS服务器与根域及其子域之间的查询方式是迭代查询；递归查询与迭代查询区别：
<ul><li><strong>递归查询-Recursive resolution (query)</strong>：在递归解析中，如果客户机被授权使用域名，它就向第一服务器(the.edu)发送请求，否则就向下一服务器发送客户机请求，直到正确的服务器解析查询并向客户机发送应答；</li> <li><img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200907234834.png" align="" style="zoom:50%;"></li> <li><img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200907234835.png" align="" style="zoom:50%;"></li> <li><strong>迭代查询-Iterative resolution</strong>：客户端向第一个服务器发送查询，如果服务器被授权使用域名，它就会发送应答(IP 或域名) ，否则它就会发送下一个服务器的 IP 地址来解决查询。现在客户端将查询发送到第二台服务器。客户端继续这个向服务器发送查询的过程，直到查询被解析；</li> <li><img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200907234836.png" align="" style="zoom:50%;"></li> <li><img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200907234837.png" align="" style="zoom:30%;"></li> <li>综上，递归查询时客户单只发送查询到第一个服务器，然后服务器将请求发送到下一个服务器，直到查询被解析；而在迭代查询中，客户端负责将查询发送到不同的服务器，直到查询被解析；</li></ul></li></ul> <p>4、然后，若上述过程均解析失败，则根据本地 DNS 服务器的设置(是否设置转发器)进行查询：</p> <ul><li>若未开启转发模式：
<ul><li>首先，本地 DNS 服务器会向 13台 <u><em>根 DNS 服务器</em></u> 发起查询(DNS 服务器均内置13台根域的 DNS 的 IP 地址)，后者收到请求后会判断(.com) 由谁授权管理，并会返回负责该顶级域名的服务器的 IP (<u><em>下一级DNS服务器</em></u>)；</li> <li>然后，本地 DNS 服务器收到响应后，向负责 .com 域的服务器发起查询，若服务器自身无法解析，则会将管理 <code>baidu.com</code> 域的<u><em>下一级 DNS服务器</em></u> IP 地址返回给本地 DNS 服务器；</li> <li>最后，当本地 DNS 服务器收到后，查询负责 <code>baidu.com</code>  域的服务器；</li> <li>重复上述动作进行查询，直至 <code>www.baidu.com</code> ，最后返回给 DNS 服务器，服务器将结果返回给主机，主机再交给浏览器；</li></ul></li> <li>若已开启转发模式：本地 DNS服务器就会将请求转发至上一级 DNS服务器，由上一级服务器进行解析，若上级服务器无法解析，则或寻找根DNS或把转请求转至上上级，循环往复，最后返回给 DNS 服务器，服务器将结果返回给主机，主机再交给浏览器；</li></ul> <p>5、最后，若上述方法 (本地、DNS 服务器、缓存、迭代查询)均失败，操作系统则会：</p> <ul><li>首先，查询 <strong><u>NetBIOS name Cache (NETBIOS名称缓存，存放最近一段时间内成功通讯的计算机的机名与 IP 地址)</u></strong>，</li> <li>然后，若还失败，则查询 <strong><u>WINS 服务器(NETBIOS 名称和 IP 地址对应的服务器)</u></strong>，</li> <li>倘若，还失败，则客户端进行广播查找</li> <li>假若，还失败，客户端读取 <strong><u>LMHOSTS 文件 (类似 Hosts)</u></strong>；</li> <li>最后，解析失败</li></ul> <p>注意：无论本地DNS服务器开启转发模式与否，最后均将结果返回给自身，本地DNS服务器再将其返回给用户；从 <strong>客户端到本地DNS服务器是递归查询，而DNS服务器间的交互查询是迭代查询</strong>；</p> <img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200907234838.png" style="zoom:50%;"> <p>注意：<strong>主机向本地域名服务器的查询一般都是采用递归查询</strong>：若主机所询问的本地域名服务器不知道被查询的域名的IP地址，则本地域名服务器就以 DNS客户身份，向其它根域名服务器继续发出查询请求报文(即替主机继续查询)，而不是让主机自己进行下一步查询。因此，递归查询返回的查询结果或者是所要查询的IP地址，或者是报错，表示无法查询到所需的IP地址；而<strong>本地域名服务器向根域名服务器的查询的迭代查询</strong>：当根域名服务器收到本地域名服务器发出的迭代查询请求报文时，要么给出所要查询的IP地址，要么告诉本地服务器：“下一步应当向哪个域名服务器进行查询”。然后让本地服务器进行后续的查询。根域名服务器通常是将自己知道的顶级域名服务器的IP地址告诉本地域名服务器，让本地域名服务器再向顶级域名服务器查询。顶级域名服务器在收到本地域名服务器的查询请求后，要么给出所要查询的IP地址，要么告诉本地服务器下一步应当向哪一权限域名服务器进行查询。最后，知道了所要解析的IP地址或报错，然后把这个结果返回给发起查询的主机；</p> <img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200907234839.png" style="zoom:50%;"> <img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200907234840.png" style="zoom:50%;"> <p>注意：查找过程中，优化点如下：</p> <ul><li>DNS 存在着多级缓存，从离浏览器的距离排序的话，有以下几种：</li> <li>浏览器缓存，系统缓存，路由器缓存，IPS服务器缓存，根域名服务器缓存，顶级域名服务器缓存，主域名服务器缓存；</li> <li>在域名和 IP 的映射过程中，给了应用基于域名做负载均衡的机会，可以是简单的负载均衡，也可以根据地址和运营商做全局的负载均衡；</li></ul> <h1 id="二、dns-报文"><a href="#二、dns-报文" class="header-anchor">#</a> 二、DNS 报文</h1> <img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200907234841.png" style="zoom:50%;"> <img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200907234842.png" style="zoom:50%;"> <ul><li>注意：请求和响应格式为同一结构，只是部分字段内容的有无；</li> <li>注意：query：查询域名；response：返回 IP 地址；</li></ul> <h2 id="_2-1、dns-请求报文"><a href="#_2-1、dns-请求报文" class="header-anchor">#</a> 2-1、DNS 请求报文</h2> <h3 id="_2-1-1、question-字段格式"><a href="#_2-1-1、question-字段格式" class="header-anchor">#</a> 2-1-1、Question 字段格式</h3> <img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200907234843.png" align="" style="zoom:40%;"> <img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200907234844.png" align="" style="zoom:50%;"> <h2 id="_2-2、dns-响应报文"><a href="#_2-2、dns-响应报文" class="header-anchor">#</a> 2-2、DNS 响应报文</h2> <h3 id="_2-2-1、answer-字段格式"><a href="#_2-2-1、answer-字段格式" class="header-anchor">#</a> 2-2-1、Answer 字段格式</h3> <img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200907234845.png" align="" style="zoom:40%;"> <img src="https://leibnize-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200907234846.png" style="zoom:50%;"> <h2 id="_2-3、dns-使用-udp"><a href="#_2-3、dns-使用-udp" class="header-anchor">#</a> 2-3、DNS 使用 UDP</h2> <p><u>DNS 使用 UDP 传输原因：减小响应时间</u> (响应时间= DNS域名解析时间(域名解析时间越小越好)+ TCP 连接建立时间(固定的三次握手很难有进一步缩小的空间) + HTTP交易时间(基于Request / Response很难有提升的空间))；</p> <ul><li>采用TCP传输，则域名解析时间为：
<ul><li>DNS域名解析时间 = TCP连接时间 + DNS交易时间(若查询冷门域名信息，则还可能会经过域名根服务器、一二级域名服务器迭代查询，成本高昂)；</li></ul></li> <li>采用UDP传输，则域名解析时间为：
<ul><li>DNS域名解析时间 = DNS交易时间，减小响应时间，有效信息占比高；</li></ul></li></ul> <h1 id="三、安全与优化"><a href="#三、安全与优化" class="header-anchor">#</a> 三、安全与优化</h1> <h2 id="_3-1、dns-安全问题"><a href="#_3-1、dns-安全问题" class="header-anchor">#</a> 3-1、DNS 安全问题</h2> <h3 id="_3-1-1、dns-ddos-攻击"><a href="#_3-1-1、dns-ddos-攻击" class="header-anchor">#</a> 3-1-1、DNS DDoS 攻击</h3> <p>DNS 分布式拒绝服务 (DDoS) 带宽洪泛攻击，即攻击者向每个 DNS 根服务器/顶级域名服务器发送大量分组，使得大多数合法  DNS 请求无法得到应答；</p> <ul><li>对策A：使用分组过滤器保护，阻挡所偶有指向根服务器的 ICMP ping 报文；</li> <li>对策B：启动本地服务器的缓存技术，本地服务器缓存顶级域名服务器地址(便可绕过迭代查询根级服务器)；</li></ul> <h2 id="_3-2、dns-优化方式"><a href="#_3-2、dns-优化方式" class="header-anchor">#</a> 3-2、DNS 优化方式</h2> <h3 id="_3-2-1、减少主机名"><a href="#_3-2-1、减少主机名" class="header-anchor">#</a> 3-2-1、减少主机名</h3> <p>当客户端 DNS 缓存为空，DNS 查找数量与要加载的  Web 页面中唯一主机名的数量相同(含各类资源主机名)，</p> <p>所以：减少主机名数量可减少 DNS 查找数量，提升页面加载速度；</p> <p>注意：减少主机名与尽可能让浏览器并行下载相冲突，需合理处理关系；</p> <p>建议：将组件放到至少2个但不多于4个的主机名下，减少 DNS 查找的同时也允许高度并行下载；</p></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">最后更新: </span> <span class="time">9/19/2020, 7:31:44 PM</span></div></footer> <!----> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.58d463af.js" defer></script><script src="/assets/js/3.5b6bd7ce.js" defer></script><script src="/assets/js/1.53e5735b.js" defer></script><script src="/assets/js/198.530f7c9c.js" defer></script>
  </body>
</html>
